(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function H(){}function at(t,e){for(const s in e)t[s]=e[s];return t}function We(t){return t()}function Pe(){return Object.create(null)}function X(t){t.forEach(We)}function Ye(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ae;function be(t,e){return ae||(ae=document.createElement("a")),ae.href=e,t===ae.href}function ct(t){return Object.keys(t).length===0}function ft(t,...e){if(t==null)return H;const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function ke(t,e,s){t.$$.on_destroy.push(ft(e,s))}function Be(t,e,s,n){if(t){const i=Fe(t,e,s,n);return t[0](i)}}function Fe(t,e,s,n){return t[1]&&n?at(s.ctx.slice(),t[1](n(e))):s.ctx}function Xe(t,e,s,n){if(t[2]&&n){const i=t[2](n(s));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],h=Math.max(e.dirty.length,i.length);for(let r=0;r<h;r+=1)l[r]=e.dirty[r]|i[r];return l}return e.dirty|i}return e.dirty}function $e(t,e,s,n,i,l){if(i){const h=Fe(e,s,n,l);t.p(h,i)}}function Ge(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let n=0;n<s;n++)e[n]=-1;return e}return-1}function ze(t,e,s){return t.set(s),e}function dt(t){return t&&Ye(t.destroy)?t.destroy:H}function w(t,e){t.appendChild(e)}function v(t,e,s){t.insertBefore(e,s||null)}function M(t){t.parentNode.removeChild(t)}function pt(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function P(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function j(){return S(" ")}function mt(){return S("")}function O(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function gt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function _t(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function bt(t,e,s,n){s===null?t.style.removeProperty(e):t.style.setProperty(e,s,n?"important":"")}function Ce(t,e){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function wt(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function yt(t,e,{bubbles:s=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,s,n,e),i}let ne;function se(t){ne=t}function V(){if(!ne)throw new Error("Function called outside component initialization");return ne}function Mt(t){V().$$.on_mount.push(t)}function Je(t){V().$$.on_destroy.push(t)}function vt(){const t=V();return(e,s,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=yt(e,s,{cancelable:n});return i.slice().forEach(h=>{h.call(t,l)}),!l.defaultPrevented}return!0}}function Pt(t,e){return V().$$.context.set(t,e),e}function kt(t){return V().$$.context.get(t)}function zt(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(n=>n.call(this,e))}const ee=[],F=[],fe=[],Te=[],Ct=Promise.resolve();let we=!1;function Tt(){we||(we=!0,Ct.then(Ke))}function ie(t){fe.push(t)}const _e=new Set;let ce=0;function Ke(){const t=ne;do{for(;ce<ee.length;){const e=ee[ce];ce++,se(e),Et(e.$$)}for(se(null),ee.length=0,ce=0;F.length;)F.pop()();for(let e=0;e<fe.length;e+=1){const s=fe[e];_e.has(s)||(_e.add(s),s())}fe.length=0}while(ee.length);for(;Te.length;)Te.pop()();we=!1,_e.clear(),se(t)}function Et(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ie)}}const de=new Set;let G;function Ee(){G={r:0,c:[],p:G}}function Se(){G.r||X(G.c),G=G.p}function q(t,e){t&&t.i&&(de.delete(t),t.i(e))}function W(t,e,s,n){if(t&&t.o){if(de.has(t))return;de.add(t),G.c.push(()=>{de.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}else n&&n()}const St=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function pe(t){t&&t.c()}function re(t,e,s,n){const{fragment:i,on_mount:l,on_destroy:h,after_update:r}=t.$$;i&&i.m(e,s),n||ie(()=>{const a=l.map(We).filter(Ye);h?h.push(...a):X(a),t.$$.on_mount=[]}),r.forEach(ie)}function oe(t,e){const s=t.$$;s.fragment!==null&&(X(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function Rt(t,e){t.$$.dirty[0]===-1&&(ee.push(t),Tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,s,n,i,l,h,r=[-1]){const a=ne;se(t);const o=t.$$={fragment:null,ctx:null,props:l,update:H,not_equal:i,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Pe(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};h&&h(o.root);let u=!1;if(o.ctx=s?s(t,e.props||{},(d,f,...c)=>{const g=c.length?c[0]:f;return o.ctx&&i(o.ctx[d],o.ctx[d]=g)&&(!o.skip_bound&&o.bound[d]&&o.bound[d](g),u&&Rt(t,d)),f}):[],o.update(),u=!0,X(o.before_update),o.fragment=n?n(o.ctx):!1,e.target){if(e.hydrate){const d=_t(e.target);o.fragment&&o.fragment.l(d),d.forEach(M)}else o.fragment&&o.fragment.c();e.intro&&q(t.$$.fragment),re(t,e.target,e.anchor,e.customElement),Ke()}se(a)}class ue{$destroy(){oe(this,1),this.$destroy=H}$on(e,s){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(s),()=>{const i=n.indexOf(s);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function It(){const t=V();return e=>{const s=jt.map(n=>O(e,n,i=>zt(t,i)));return{destroy:()=>s.forEach(n=>n())}}}class Lt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:s,context:n,width:i,height:l}){const h={context:n,width:i,height:l};if(this.needsResize&&(n.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[r,a]of this.setups)a(h),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e&&n.clearRect(0,0,i,l);for(const r of this.layerSequence)this.renderers.get(r)(h);this.needsRedraw=!1}}}function qt(t){let e,s,n,i,l,h,r,a,o;const u=t[13].default,d=Be(u,t,t[12],null);return{c(){e=P("canvas"),l=j(),h=P("div"),d&&d.c(),y(e,"style",s="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")),y(e,"width",n=t[1]*t[0]),y(e,"height",i=t[2]*t[0]),bt(h,"display","none")},m(f,c){v(f,e,c),t[14](e),v(f,l,c),v(f,h,c),d&&d.m(h,null),t[15](h),r=!0,a||(o=dt(t[6].call(null,e)),a=!0)},p(f,[c]){(!r||c&14&&s!==(s="display: block; width: "+f[1]+"px; height: "+f[2]+"px;"+(f[3]?` ${f[3]}`:"")))&&y(e,"style",s),(!r||c&3&&n!==(n=f[1]*f[0]))&&y(e,"width",n),(!r||c&5&&i!==(i=f[2]*f[0]))&&y(e,"height",i),d&&d.p&&(!r||c&4096)&&$e(d,u,f,f[12],r?Xe(u,f[12],c,null):Ge(f[12]),null)},i(f){r||(q(d,f),r=!0)},o(f){W(d,f),r=!1},d(f){f&&M(e),t[14](null),f&&M(l),f&&M(h),d&&d.d(f),t[15](null),a=!1,o()}}}const Ue={};function At(t,e,s){let{$$slots:n={},$$scope:i}=e,{width:l=640,height:h=640,pixelRatio:r=void 0,style:a=null,autoclear:o=!0}=e,u,d,f,c,g;const _=It(),b=new Lt;function p(){b.redraw()}function T(){return u}function C(){return d}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function Y(){b.render({context:d,width:l,height:h,pixelRatio:r,autoclear:o}),f=window.requestAnimationFrame(Y)}Pt(Ue,{register:b.register,unregister:b.unregister,redraw:b.redraw}),Mt(()=>{d=u.getContext("2d"),g=new MutationObserver(k),g.observe(c,{childList:!0}),k(),Y();function k(){const z=[...c.children].map(A=>+A.dataset.layerId);s(11,b.layerSequence=z,b),b.redraw()}}),Je(()=>{typeof window>"u"||(window.cancelAnimationFrame(f),g.disconnect())});function B(k){F[k?"unshift":"push"](()=>{u=k,s(4,u)})}function $(k){F[k?"unshift":"push"](()=>{c=k,s(5,c)})}return t.$$set=k=>{"width"in k&&s(1,l=k.width),"height"in k&&s(2,h=k.height),"pixelRatio"in k&&s(0,r=k.pixelRatio),"style"in k&&s(3,a=k.style),"autoclear"in k&&s(7,o=k.autoclear),"$$scope"in k&&s(12,i=k.$$scope)},t.$$.update=()=>{t.$$.dirty&2183&&b.resize()},[r,l,h,a,u,c,_,o,p,T,C,b,i,n,B,$]}class Ht extends ue{constructor(e){super(),le(this,e,At,qt,Q,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Dt(t){let e;return{c(){e=P("div"),y(e,"data-layer-id",t[0])},m(s,n){v(s,e,n)},p:H,i:H,o:H,d(s){s&&M(e)}}}function Ot(t,e,s){const{register:n,unregister:i,redraw:l}=kt(Ue);let{setup:h=void 0,render:r=()=>{}}=e;if(typeof h!="function"&&h!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const a=n({setup:h,render:r});return Je(()=>i(a)),t.$$set=o=>{"setup"in o&&s(1,h=o.setup),"render"in o&&s(2,r=o.render)},t.$$.update=()=>{t.$$.dirty&4&&l()},[a,h,r]}class Nt extends ue{constructor(e){super(),le(this,e,Ot,Dt,Q,{setup:1,render:2})}}const K=[];function Wt(t,e){return{subscribe:he(t,e).subscribe}}function he(t,e=H){let s;const n=new Set;function i(r){if(Q(t,r)&&(t=r,s)){const a=!K.length;for(const o of n)o[1](),K.push(o,t);if(a){for(let o=0;o<K.length;o+=2)K[o][0](K[o+1]);K.length=0}}}function l(r){i(r(t))}function h(r,a=H){const o=[r,a];return n.add(o),n.size===1&&(s=e(i)||H),r(t),()=>{n.delete(o),n.size===0&&(s(),s=null)}}return{set:i,update:l,subscribe:h}}let Re;const Qe=Date.now();function Ve(t){return t(Date.now()-Qe),Re=window.requestAnimationFrame(()=>Ve(t)),()=>window.cancelAnimationFrame(Re)}function Yt(){}Wt(Date.now()-Qe,typeof window>"u"?Yt:Ve);const Bt="/jigsaw-svelte/assets/puzzle.7b2c6e4e.wav";class Ft{constructor(e,s,n,i,l,h){this.width=l,this.height=h,this.i=e,this.j=s,this.correctPos={x:n.x,y:n.y},this.currentPos={x:i.x,y:i.y},this.path=null,this.borderpath=null,this.shape={},this.solved=!1}draw(e,s,n,i,l=i){const h=Math.min(this.width,this.height),r=.08*h,a=.2*h,o=.2*h;let u=this.currentPos.x+n;this.path=new Path2D,this.path.moveTo(u,this.currentPos.y),this.shape.top&&(this.path.lineTo(u+this.width*Math.abs(this.shape.top)-r,this.currentPos.y),this.path.bezierCurveTo(u+this.width*Math.abs(this.shape.top)-r,this.currentPos.y-o*Math.sign(this.shape.top)*.2,u+this.width*Math.abs(this.shape.top)-a,this.currentPos.y-o*Math.sign(this.shape.top),u+this.width*Math.abs(this.shape.top),this.currentPos.y-o*Math.sign(this.shape.top)),this.path.bezierCurveTo(u+this.width*Math.abs(this.shape.top)+a,this.currentPos.y-o*Math.sign(this.shape.top),u+this.width*Math.abs(this.shape.top)+r,this.currentPos.y-o*Math.sign(this.shape.top)*.2,u+this.width*Math.abs(this.shape.top)+r,this.currentPos.y)),this.path.lineTo(u+this.width,this.currentPos.y),this.shape.right&&(this.path.lineTo(u+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)-r),this.path.bezierCurveTo(u+this.width-o*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)-r,u+this.width-o*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)-a,u+this.width-o*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)),this.path.bezierCurveTo(u+this.width-o*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)+a,u+this.width-o*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)+r,u+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)+r)),this.path.lineTo(u+this.width,this.currentPos.y+this.height),this.shape.bottom&&(this.path.lineTo(u+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height),this.path.bezierCurveTo(u+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height+o*Math.sign(this.shape.bottom)*.2,u+this.width*Math.abs(this.shape.bottom)+a,this.currentPos.y+this.height+o*Math.sign(this.shape.bottom),u+this.width*Math.abs(this.shape.bottom),this.currentPos.y+this.height+o*Math.sign(this.shape.bottom)),this.path.bezierCurveTo(u+this.width*Math.abs(this.shape.bottom)-a,this.currentPos.y+this.height+o*Math.sign(this.shape.bottom),u+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height+o*Math.sign(this.shape.bottom)*.2,u+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height)),this.path.lineTo(u,this.currentPos.y+this.height),this.shape.left&&(this.path.lineTo(u,this.currentPos.y+this.height*Math.abs(this.shape.left)+r),this.path.bezierCurveTo(u+o*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)+r,u+o*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)+a,u+o*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)),this.path.bezierCurveTo(u+o*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)-a,u+o*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)-r,u,this.currentPos.y+this.height*Math.abs(this.shape.left)-r)),this.path.lineTo(u,this.currentPos.y),e.save(),e.clip(this.path);let d=s.naturalWidth/l,f=s.naturalHeight/i,c=Math.min(d,f)*o/h;e.drawImage(s,this.i*d-c,this.j*f-c,d+c*2,f+c*2,u-o,this.currentPos.y-o,this.width+o*2,this.height+o*2),e.restore(),e.stroke(this.path)}}const U=he(0),te=he(0),je=he(null),ye=he(!1),{window:Me}=St;function Xt(t){let e,s;return e=new Nt({props:{render:t[4],setup:t[10]}}),{c(){pe(e.$$.fragment)},m(n,i){re(e,n,i),s=!0},p(n,i){const l={};i[0]&16&&(l.render=n[4]),e.$set(l)},i(n){s||(q(e.$$.fragment,n),s=!0)},o(n){W(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function $t(t){let e,s,n,i,l,h,r,a;ie(t[15]);let o={width:t[0],height:t[5],style:"margin: 0 auto; touch-action: none;border: 1px solid black; cursor: "+t[1]+";",$$slots:{default:[Xt]},$$scope:{ctx:t}};return e=new Ht({props:o}),t[16](e),e.$on("mousedown",t[17]),e.$on("mousemove",t[18]),e.$on("mouseup",t[19]),e.$on("touchstart",t[20]),e.$on("touchmove",t[21]),e.$on("touchend",t[22]),{c(){pe(e.$$.fragment),s=j(),n=P("audio"),i=P("track"),y(i,"kind","captions"),be(n.src,l=Bt)||y(n,"src",l),y(n,"preload","auto"),n.controls=!0},m(u,d){re(e,u,d),v(u,s,d),v(u,n,d),w(n,i),t[23](n),h=!0,r||(a=[O(Me,"resize",t[9]),O(Me,"resize",t[15])],r=!0)},p(u,d){const f={};d[0]&1&&(f.width=u[0]),d[0]&2&&(f.style="margin: 0 auto; touch-action: none;border: 1px solid black; cursor: "+u[1]+";"),d[0]&16|d[1]&512&&(f.$$scope={dirty:d,ctx:u}),e.$set(f)},i(u){h||(q(e.$$.fragment,u),h=!0)},o(u){W(e.$$.fragment,u),h=!1},d(u){t[16](null),oe(e,u),u&&M(s),u&&M(n),t[23](null),r=!1,X(a)}}}const Gt=.7;function Jt(t,e,s){let n,{img:i}=e,l;U.subscribe(m=>{l=m});let h;te.subscribe(m=>{s(12,h=m)}),window.devicePixelRatio=1;const r=l,a=l;let o=window.innerWidth;const u=window.innerHeight,d=Gt*Math.min(o/i.naturalWidth,u/i.naturalHeight),f=d*i.naturalWidth,c=d*i.naturalHeight;let g=o/2-f/2,_=[],b,p,T=0,C="default";function Y(m,I,R){for(let E=0;E<m.length;E++)m[E].currentPos.x=Math.floor(Math.random()*I)-g,m[E].currentPos.y=Math.floor(Math.random()*R)}let B;function $(m,I,R=null){let E=B.getContext();for(let L=_.length-1;L>=0;L--)if(E.isPointInPath(_[L].path,m,I)){p=_[L];break}if(p){R&&R.preventDefault(),s(1,C="grab"),b={x:m-p.currentPos.x,y:I-p.currentPos.y};let L=_.splice(_.findIndex(D=>D.j==p.j&&D.i==p.i),1);_.push(L[0]),s(14,_)}}function k(m,I,R=null){b&&(R&&R.preventDefault(),p.currentPos.x=m-b.x,p.currentPos.y=I-b.y,s(14,_))}function z(){T===_.length&&ye.update(I=>!0)}let A;function me(){let m=null;if(p){s(1,C="default");let I=30;const R=_.findIndex(E=>E.j==p.j&&E.i==p.i);if(Math.abs(p.currentPos.x-p.correctPos.x)<I&&Math.abs(p.currentPos.y-p.correctPos.y)<I){A.play(),m=setTimeout(()=>{A.pause(),s(3,A.currentTime=0,A)},500),p.currentPos.x=p.correctPos.x,p.currentPos.y=p.correctPos.y;let E=_.splice(R,1);p.solved||(E[0].solved=!0,T=T+1),m&&clearTimeout(m),_.unshift(E[0]),s(14,_)}else p.solved&&(s(14,_[R].solved=!1,_),T=T-1);b=null,p=null}z()}function Ze(){s(13,g=o/2-f/2),B.redraw()}let ve;function xe(){clearTimeout(ve),ve=setTimeout(Ze,100)}const et=({context:m,width:I,height:R})=>{for(let L=0;L<a;L++)for(let D=0;D<r;D++){let Z=L*f/a,x=R/2-c/2+D*c/r,N=new Ft(L,D,{x:Z,y:x},{x:Z,y:x},f/a,c/r);_.push(N)}let E=0;for(let L=0;L<a;L++)for(let D=0;D<r;D++){let Z=D,x=L,N=_[E];if(Z==r-1)N.shape.bottom=null;else{let ge=Math.random()-.5<0?-1:1;N.shape.bottom=ge*(Math.random()*.4+.3)}if(x==a-1)N.shape.right=null;else{let ge=Math.random()-.5<0?-1:1;N.shape.right=ge*(Math.random()*.4+.3)}Z==0?N.shape.top=null:N.shape.top=-_[E-1].shape.bottom,x==0?N.shape.left=null:N.shape.left=-_[E-r].shape.right,E++}Y(_,I-f/a,R-c/r)};function tt(){s(0,o=Me.innerWidth)}function st(m){F[m?"unshift":"push"](()=>{B=m,s(2,B)})}const nt=m=>{$(m.offsetX,m.offsetY)},it=m=>{k(m.offsetX,m.offsetY)},rt=()=>{me()},ot=m=>$(m.touches[0].clientX,m.touches[0].clientY,m),lt=m=>{k(m.touches[0].clientX,m.touches[0].clientY,m)},ut=()=>{me()};function ht(m){F[m?"unshift":"push"](()=>{A=m,s(3,A)})}return t.$$set=m=>{"img"in m&&s(11,i=m.img)},t.$$.update=()=>{t.$$.dirty[0]&30720&&s(4,n=({context:m,width:I,height:R})=>{m.globalAlpha=h,m.drawImage(i,I/2-f/2,R/2-c/2,f,c),m.globalAlpha=1,h==0&&(m.beginPath(),m.rect(I/2-f/2,R/2-c/2,f,c),m.stroke());for(let E=0;E<_.length;E++)_[E].draw(m,i,g,r)})},[o,C,B,A,n,u,$,k,me,xe,et,i,h,g,_,tt,st,nt,it,rt,ot,lt,ut,ht]}class Kt extends ue{constructor(e){super(),le(this,e,Jt,$t,Q,{img:11},null,[-1,-1])}}function Ut(t){let e,s,n,i,l,h,r;const a=t[2].default,o=Be(a,t,t[1],null);return{c(){e=P("div"),s=P("span"),s.textContent="\u2715",n=j(),i=P("div"),o&&o.c(),y(s,"class","svelte-1w2fu07"),y(i,"class","modal-content svelte-1w2fu07"),y(e,"class","modal svelte-1w2fu07")},m(u,d){v(u,e,d),w(e,s),w(e,n),w(e,i),o&&o.m(i,null),l=!0,h||(r=O(s,"click",t[0]),h=!0)},p(u,[d]){o&&o.p&&(!l||d&2)&&$e(o,a,u,u[1],l?Xe(a,u[1],d,null):Ge(u[1]),null)},i(u){l||(q(o,u),l=!0)},o(u){W(o,u),l=!1},d(u){u&&M(e),o&&o.d(u),h=!1,r()}}}function Qt(t,e,s){let{$$slots:n={},$$scope:i}=e;const l=vt(),h=()=>l("close");return t.$$set=r=>{"$$scope"in r&&s(1,i=r.$$scope)},[h,i,n]}class Vt extends ue{constructor(e){super(),le(this,e,Qt,Ut,Q,{})}}const Ie=t=>{const e=h=>String(h).padStart(2,"0");let s=t%1e3;t=(t-s)/1e3;let n=t%60;t=(t-n)/60;let i=t%60,l=(t-i)/60;return`${e(l)}:${e(i)}:${e(n)}.${e(s)}`};function Le(t,e,s){const n=t.slice();return n[21]=e[s],n}function qe(t){let e,s,n,i,l,h,r,a,o,u,d,f,c;return{c(){e=P("h1"),e.textContent="Create your own jigsaw!",s=j(),n=P("form"),i=P("input"),l=j(),h=P("div"),r=P("button"),r.textContent="Select image",a=j(),o=P("p"),o.textContent="or",u=j(),d=P("button"),d.textContent="Solve random image",y(i,"type","file"),y(i,"id","img"),y(i,"name","img"),y(i,"accept","image/*"),y(n,"class","form-1"),y(r,"class","img-button"),y(h,"class","choose-or-random-buttons")},m(g,_){v(g,e,_),v(g,s,_),v(g,n,_),w(n,i),t[13](i),v(g,l,_),v(g,h,_),w(h,r),w(h,a),w(h,o),w(h,u),w(h,d),f||(c=[O(i,"change",t[14]),O(r,"click",gt(t[15])),O(d,"click",t[16])],f=!0)},p:H,d(g){g&&M(e),g&&M(s),g&&M(n),t[13](null),g&&M(l),g&&M(h),f=!1,X(c)}}}function Ae(t){let e,s;return{c(){e=P("img"),be(e.src,s=t[0])||y(e,"src",s),y(e,"alt","puzzle"),y(e,"width","700px")},m(n,i){v(n,e,i),t[17](e)},p(n,i){i&1&&!be(e.src,s=n[0])&&y(e,"src",s)},d(n){n&&M(e),t[17](null)}}}function He(t){let e,s,n,i,l,h,r,a,o,u,d,f=t[8],c=[];for(let p=0;p<f.length;p+=1)c[p]=De(Le(t,f,p));function g(p,T){if(p[3]==="Easy")return es;if(p[3]==="Medium")return xt;if(p[3]==="Hard")return Zt}let _=g(t),b=_&&_(t);return{c(){e=P("select");for(let p=0;p<c.length;p+=1)c[p].c();s=j(),b&&b.c(),n=j(),i=P("div"),l=P("input"),h=j(),r=P("label"),r.innerHTML="<p>Background image</p>",a=j(),o=P("button"),o.textContent="New Game",t[3]===void 0&&ie(()=>t[18].call(e)),y(l,"type","checkbox"),l.checked=!0,y(l,"id","switch"),y(l,"class","checkbox"),y(r,"for","switch"),y(r,"class","toggle"),y(i,"class","background-image-checkbox-wrapper")},m(p,T){v(p,e,T);for(let C=0;C<c.length;C+=1)c[C].m(e,null);Ce(e,t[3]),v(p,s,T),b&&b.m(p,T),v(p,n,T),v(p,i,T),w(i,l),w(i,h),w(i,r),v(p,a,T),v(p,o,T),u||(d=[O(e,"change",t[18]),O(e,"click",t[11]),O(l,"click",t[12]),O(o,"click",t[19])],u=!0)},p(p,T){if(T&256){f=p[8];let C;for(C=0;C<f.length;C+=1){const Y=Le(p,f,C);c[C]?c[C].p(Y,T):(c[C]=De(Y),c[C].c(),c[C].m(e,null))}for(;C<c.length;C+=1)c[C].d(1);c.length=f.length}T&264&&Ce(e,p[3]),_===(_=g(p))&&b?b.p(p,T):(b&&b.d(1),b=_&&_(p),b&&(b.c(),b.m(n.parentNode,n)))},d(p){p&&M(e),pt(c,p),p&&M(s),b&&b.d(p),p&&M(n),p&&M(i),p&&M(a),p&&M(o),u=!1,X(d)}}}function De(t){let e,s=t[21]+"",n;return{c(){e=P("option"),n=S(s),e.__value=t[21],e.value=e.__value},m(i,l){v(i,e,l),w(e,n)},p:H,d(i){i&&M(e)}}}function Zt(t){let e,s,n,i,l,h;return{c(){e=P("p"),s=S("Selected Hard ("),n=S(t[4]),i=S(" x "),l=S(t[4]),h=S(")")},m(r,a){v(r,e,a),w(e,s),w(e,n),w(e,i),w(e,l),w(e,h)},p(r,a){a&16&&J(n,r[4]),a&16&&J(l,r[4])},d(r){r&&M(e)}}}function xt(t){let e,s,n,i,l,h;return{c(){e=P("p"),s=S("Selected Medium ("),n=S(t[4]),i=S(" x "),l=S(t[4]),h=S(")")},m(r,a){v(r,e,a),w(e,s),w(e,n),w(e,i),w(e,l),w(e,h)},p(r,a){a&16&&J(n,r[4]),a&16&&J(l,r[4])},d(r){r&&M(e)}}}function es(t){let e,s,n,i,l,h;return{c(){e=P("p"),s=S("Selected Easy ("),n=S(t[4]),i=S(" x "),l=S(t[4]),h=S(")")},m(r,a){v(r,e,a),w(e,s),w(e,n),w(e,i),w(e,l),w(e,h)},p(r,a){a&16&&J(n,r[4]),a&16&&J(l,r[4])},d(r){r&&M(e)}}}function Oe(t){let e,s;return e=new Kt({props:{img:t[2]}}),{c(){pe(e.$$.fragment)},m(n,i){re(e,n,i),s=!0},p(n,i){const l={};i&4&&(l.img=n[2]),e.$set(l)},i(n){s||(q(e.$$.fragment,n),s=!0)},o(n){W(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function Ne(t){let e,s;return e=new Vt({props:{$$slots:{default:[ts]},$$scope:{ctx:t}}}),e.$on("close",t[9]),{c(){pe(e.$$.fragment)},m(n,i){re(e,n,i),s=!0},p(n,i){const l={};i&16777280&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){s||(q(e.$$.fragment,n),s=!0)},o(n){W(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function ts(t){let e,s,n,i,l=Ie(new Date-t[6])+"",h;return{c(){e=P("h2"),e.textContent="Puzzle solved!",s=j(),n=P("p"),i=S("Your time: "),h=S(l),y(n,"class","modal-text svelte-4jjkt5")},m(r,a){v(r,e,a),v(r,s,a),v(r,n,a),w(n,i),w(n,h)},p(r,a){a&64&&l!==(l=Ie(new Date-r[6])+"")&&J(h,l)},d(r){r&&M(e),r&&M(s),r&&M(n)}}}function ss(t){let e,s,n,i,l,h,r,a=!t[1]&&qe(t),o=t[0]&&Ae(t),u=!t[1]&&He(t),d=t[1]&&Oe(t),f=t[7]&&Ne(t);return{c(){e=P("main"),a&&a.c(),s=j(),o&&o.c(),n=j(),u&&u.c(),i=j(),d&&d.c(),l=j(),f&&f.c(),h=mt(),y(e,"class","container")},m(c,g){v(c,e,g),a&&a.m(e,null),w(e,s),o&&o.m(e,null),w(e,n),u&&u.m(e,null),v(c,i,g),d&&d.m(c,g),v(c,l,g),f&&f.m(c,g),v(c,h,g),r=!0},p(c,[g]){c[1]?a&&(a.d(1),a=null):a?a.p(c,g):(a=qe(c),a.c(),a.m(e,s)),c[0]?o?o.p(c,g):(o=Ae(c),o.c(),o.m(e,n)):o&&(o.d(1),o=null),c[1]?u&&(u.d(1),u=null):u?u.p(c,g):(u=He(c),u.c(),u.m(e,null)),c[1]?d?(d.p(c,g),g&2&&q(d,1)):(d=Oe(c),d.c(),q(d,1),d.m(l.parentNode,l)):d&&(Ee(),W(d,1,1,()=>{d=null}),Se()),c[7]?f?(f.p(c,g),g&128&&q(f,1)):(f=Ne(c),f.c(),q(f,1),f.m(h.parentNode,h)):f&&(Ee(),W(f,1,1,()=>{f=null}),Se())},i(c){r||(q(d),q(f),r=!0)},o(c){W(d),W(f),r=!1},d(c){c&&M(e),a&&a.d(),o&&o.d(),u&&u.d(),c&&M(i),d&&d.d(c),c&&M(l),f&&f.d(c),c&&M(h)}}}function ns(t,e,s){let n,i;ke(t,je,z=>s(6,n=z)),ke(t,ye,z=>s(7,i=z));let l,h=!1,r;const a=["Easy","Medium","Hard"];let o=a[0];U.update(z=>5);let u;U.subscribe(z=>{s(4,u=z)}),te.update(z=>.4);let d;te.subscribe(z=>{d=z});function f(){s(1,h=!1),ze(ye,i=!1,i),s(0,l=""),s(2,r.style.display="block",r)}function c(){l&&(s(1,h=!0),s(2,r.style.display="none",r),ze(je,n=new Date,n))}function g(){o==="Easy"?U.update(z=>5):o==="Medium"?U.update(z=>7):o==="Hard"&&U.update(z=>10)}function _(){d>0?te.update(z=>0):te.update(z=>.4)}let b;function p(z){F[z?"unshift":"push"](()=>{b=z,s(5,b)})}const T=z=>{let A=z.target.form[0].files[0];A&&s(0,l=URL.createObjectURL(A))},C=()=>{b.click()},Y=()=>s(0,l="https://picsum.photos/500?random="+Math.floor(Math.random()*1e3));function B(z){F[z?"unshift":"push"](()=>{r=z,s(2,r)})}function $(){o=wt(this),s(3,o),s(8,a)}return[l,h,r,o,u,b,n,i,a,f,c,g,_,p,T,C,Y,B,$,()=>{h?f():c()}]}class is extends ue{constructor(e){super(),le(this,e,ns,ss,Q,{})}}new is({target:document.getElementById("app")});
