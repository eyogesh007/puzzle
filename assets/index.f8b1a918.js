(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function K(){}function nt(t,e){for(const s in e)t[s]=e[s];return t}function Ye(t){return t()}function Le(){return Object.create(null)}function oe(t){t.forEach(Ye)}function Be(t){return typeof t=="function"}function ae(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ke;function Re(t,e){return ke||(ke=document.createElement("a")),ke.href=e,t===ke.href}function it(t){return Object.keys(t).length===0}function De(t,e,s,n){if(t){const i=Xe(t,e,s,n);return t[0](i)}}function Xe(t,e,s,n){return t[1]&&n?nt(s.ctx.slice(),t[1](n(e))):s.ctx}function Fe(t,e,s,n){if(t[2]&&n){const i=t[2](n(s));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(e.dirty.length,i.length);for(let r=0;r<l;r+=1)o[r]=e.dirty[r]|i[r];return o}return e.dirty|i}return e.dirty}function Je(t,e,s,n,i,o){if(i){const l=Xe(e,s,n,o);t.p(l,i)}}function Ge(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let n=0;n<s;n++)e[n]=-1;return e}return-1}function rt(t){return t&&Be(t.destroy)?t.destroy:K}function g(t,e){t.appendChild(e)}function I(t,e,s){t.insertBefore(e,s||null)}function S(t){t.parentNode.removeChild(t)}function ot(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function k(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function A(){return $(" ")}function lt(){return $("")}function G(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function M(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function ut(t){return Array.from(t.childNodes)}function ue(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function at(t,e,s,n){s===null?t.style.removeProperty(e):t.style.setProperty(e,s,n?"important":"")}function $e(t,e){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function ct(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ft(t,e,{bubbles:s=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,s,n,e),i}let ge;function pe(t){ge=t}function ce(){if(!ge)throw new Error("Function called outside component initialization");return ge}function dt(t){ce().$$.on_mount.push(t)}function Ke(t){ce().$$.on_destroy.push(t)}function pt(){const t=ce();return(e,s,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=ft(e,s,{cancelable:n});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}function gt(t,e){return ce().$$.context.set(t,e),e}function mt(t){return ce().$$.context.get(t)}function _t(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(n=>n.call(this,e))}const fe=[],ne=[],Ce=[],qe=[],bt=Promise.resolve();let je=!1;function yt(){je||(je=!0,bt.then(Ue))}function me(t){Ce.push(t)}const Se=new Set;let ze=0;function Ue(){const t=ge;do{for(;ze<fe.length;){const e=fe[ze];ze++,pe(e),wt(e.$$)}for(pe(null),fe.length=0,ze=0;ne.length;)ne.pop()();for(let e=0;e<Ce.length;e+=1){const s=Ce[e];Se.has(s)||(Se.add(s),s())}Ce.length=0}while(fe.length);for(;qe.length;)qe.pop()();je=!1,Se.clear(),pe(t)}function wt(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(me)}}const Te=new Set;let re;function Qe(){re={r:0,c:[],p:re}}function Ve(){re.r||oe(re.c),re=re.p}function X(t,e){t&&t.i&&(Te.delete(t),t.i(e))}function Q(t,e,s,n){if(t&&t.o){if(Te.has(t))return;Te.add(t),re.c.push(()=>{Te.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}else n&&n()}const vt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ee(t){t&&t.c()}function _e(t,e,s,n){const{fragment:i,on_mount:o,on_destroy:l,after_update:r}=t.$$;i&&i.m(e,s),n||me(()=>{const a=o.map(Ye).filter(Be);l?l.push(...a):oe(a),t.$$.on_mount=[]}),r.forEach(me)}function be(t,e){const s=t.$$;s.fragment!==null&&(oe(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function Mt(t,e){t.$$.dirty[0]===-1&&(fe.push(t),yt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ye(t,e,s,n,i,o,l,r=[-1]){const a=ge;pe(t);const u=t.$$={fragment:null,ctx:null,props:o,update:K,not_equal:i,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Le(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let w=!1;if(u.ctx=s?s(t,e.props||{},(c,h,...p)=>{const m=p.length?p[0]:h;return u.ctx&&i(u.ctx[c],u.ctx[c]=m)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](m),w&&Mt(t,c)),h}):[],u.update(),w=!0,oe(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const c=ut(e.target);u.fragment&&u.fragment.l(c),c.forEach(S)}else u.fragment&&u.fragment.c();e.intro&&X(t.$$.fragment),_e(t,e.target,e.anchor,e.customElement),Ue()}pe(a)}class we{$destroy(){be(this,1),this.$destroy=K}$on(e,s){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(s),()=>{const i=n.indexOf(s);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!it(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function kt(){const t=ce();return e=>{const s=Pt.map(n=>G(e,n,i=>_t(t,i)));return{destroy:()=>s.forEach(n=>n())}}}class zt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:s,context:n,width:i,height:o}){const l={context:n,width:i,height:o};if(this.needsResize&&(n.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[r,a]of this.setups)a(l),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e&&n.clearRect(0,0,i,o);for(const r of this.layerSequence)this.renderers.get(r)(l);this.needsRedraw=!1}}}function Ct(t){let e,s,n,i,o,l,r,a,u;const w=t[13].default,c=De(w,t,t[12],null);return{c(){e=k("canvas"),o=A(),l=k("div"),c&&c.c(),M(e,"style",s="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")),M(e,"width",n=t[1]*t[0]),M(e,"height",i=t[2]*t[0]),at(l,"display","none")},m(h,p){I(h,e,p),t[14](e),I(h,o,p),I(h,l,p),c&&c.m(l,null),t[15](l),r=!0,a||(u=rt(t[6].call(null,e)),a=!0)},p(h,[p]){(!r||p&14&&s!==(s="display: block; width: "+h[1]+"px; height: "+h[2]+"px;"+(h[3]?` ${h[3]}`:"")))&&M(e,"style",s),(!r||p&3&&n!==(n=h[1]*h[0]))&&M(e,"width",n),(!r||p&5&&i!==(i=h[2]*h[0]))&&M(e,"height",i),c&&c.p&&(!r||p&4096)&&Je(c,w,h,h[12],r?Fe(w,h[12],p,null):Ge(h[12]),null)},i(h){r||(X(c,h),r=!0)},o(h){Q(c,h),r=!1},d(h){h&&S(e),t[14](null),h&&S(o),h&&S(l),c&&c.d(h),t[15](null),a=!1,u()}}}const Ze={};function Tt(t,e,s){let{$$slots:n={},$$scope:i}=e,{width:o=640,height:l=640,pixelRatio:r=void 0,style:a=null,autoclear:u=!0}=e,w,c,h,p,m;const R=kt(),y=new zt;function B(){y.redraw()}function W(){return w}function D(){return c}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function z(){y.render({context:c,width:o,height:l,pixelRatio:r,autoclear:u}),h=window.requestAnimationFrame(z)}gt(Ze,{register:y.register,unregister:y.unregister,redraw:y.redraw}),dt(()=>{c=w.getContext("2d"),m=new MutationObserver(P),m.observe(p,{childList:!0}),P(),z();function P(){const V=[...p.children].map(Z=>+Z.dataset.layerId);s(11,y.layerSequence=V,y),y.redraw()}}),Ke(()=>{typeof window>"u"||(window.cancelAnimationFrame(h),m.disconnect())});function F(P){ne[P?"unshift":"push"](()=>{w=P,s(4,w)})}function U(P){ne[P?"unshift":"push"](()=>{p=P,s(5,p)})}return t.$$set=P=>{"width"in P&&s(1,o=P.width),"height"in P&&s(2,l=P.height),"pixelRatio"in P&&s(0,r=P.pixelRatio),"style"in P&&s(3,a=P.style),"autoclear"in P&&s(7,u=P.autoclear),"$$scope"in P&&s(12,i=P.$$scope)},t.$$.update=()=>{t.$$.dirty&2183&&y.resize()},[r,o,l,a,w,p,R,u,B,W,D,y,i,n,F,U]}class Et extends we{constructor(e){super(),ye(this,e,Tt,Ct,ae,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function St(t){let e;return{c(){e=k("div"),M(e,"data-layer-id",t[0])},m(s,n){I(s,e,n)},p:K,i:K,o:K,d(s){s&&S(e)}}}function Rt(t,e,s){const{register:n,unregister:i,redraw:o}=mt(Ze);let{setup:l=void 0,render:r=()=>{}}=e;if(typeof l!="function"&&l!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const a=n({setup:l,render:r});return Ke(()=>i(a)),t.$$set=u=>{"setup"in u&&s(1,l=u.setup),"render"in u&&s(2,r=u.render)},t.$$.update=()=>{t.$$.dirty&4&&o()},[a,l,r]}class jt extends we{constructor(e){super(),ye(this,e,Rt,St,ae,{setup:1,render:2})}}const le=[];function xe(t,e=K){let s;const n=new Set;function i(r){if(ae(t,r)&&(t=r,s)){const a=!le.length;for(const u of n)u[1](),le.push(u,t);if(a){for(let u=0;u<le.length;u+=2)le[u][0](le[u+1]);le.length=0}}}function o(r){i(r(t))}function l(r,a=K){const u=[r,a];return n.add(u),n.size===1&&(s=e(i)||K),r(t),()=>{n.delete(u),n.size===0&&(s(),s=null)}}return{set:i,update:o,subscribe:l}}function It(t){let e,s,n,i,o,l,r;const a=t[2].default,u=De(a,t,t[1],null);return{c(){e=k("div"),s=k("span"),s.textContent="\u2715",n=A(),i=k("div"),u&&u.c(),M(s,"class","svelte-dlh49t"),M(i,"class","modal-content svelte-dlh49t"),M(e,"class","modal svelte-dlh49t")},m(w,c){I(w,e,c),g(e,s),g(e,n),g(e,i),u&&u.m(i,null),o=!0,l||(r=G(s,"click",t[0]),l=!0)},p(w,[c]){u&&u.p&&(!o||c&2)&&Je(u,a,w,w[1],o?Fe(a,w[1],c,null):Ge(w[1]),null)},i(w){o||(X(u,w),o=!0)},o(w){Q(u,w),o=!1},d(w){w&&S(e),u&&u.d(w),l=!1,r()}}}function Lt(t,e,s){let{$$slots:n={},$$scope:i}=e;const o=pt(),l=()=>o("close");return t.$$set=r=>{"$$scope"in r&&s(1,i=r.$$scope)},[l,i,n]}class $t extends we{constructor(e){super(),ye(this,e,Lt,It,ae,{})}}const qt="/jigsaw-svelte/assets/puzzle.7b2c6e4e.wav",he=xe(0),de=xe(0);const{window:Ie}=vt;function Ht(t){let e,s;return e=new jt({props:{render:t[4],setup:t[10]}}),{c(){Ee(e.$$.fragment)},m(n,i){_e(e,n,i),s=!0},p(n,i){const o={};i[0]&16&&(o.render=n[4]),e.$set(o)},i(n){s||(X(e.$$.fragment,n),s=!0)},o(n){Q(e.$$.fragment,n),s=!1},d(n){be(e,n)}}}function He(t){let e,s;return e=new $t({props:{$$slots:{default:[Ot]},$$scope:{ctx:t}}}),e.$on("close",t[22]),{c(){Ee(e.$$.fragment)},m(n,i){_e(e,n,i),s=!0},p(n,i){const o={};i[1]&2048&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){s||(X(e.$$.fragment,n),s=!0)},o(n){Q(e.$$.fragment,n),s=!1},d(n){be(e,n)}}}function Ot(t){let e,s,n;return{c(){e=k("h2"),e.textContent="Puzzle solved!",s=A(),n=k("p"),n.textContent=`Your time: ${Wt(new Date-t[5])}`,M(n,"class","modal-text svelte-kb13dz")},m(i,o){I(i,e,o),I(i,s,o),I(i,n,o)},p:K,d(i){i&&S(e),i&&S(s),i&&S(n)}}}function At(t){let e,s,n,i,o,l,r,a,u;me(t[14]);let w={width:t[0]-50,height:et,style:"margin: 0 auto; border: 1px solid black",$$slots:{default:[Ht]},$$scope:{ctx:t}};e=new Et({props:w}),t[15](e),e.$on("mousedown",t[16]),e.$on("mousemove",t[17]),e.$on("mouseup",t[18]),e.$on("touchstart",t[19]),e.$on("touchmove",t[20]),e.$on("touchend",t[21]);let c=t[1]&&He(t);return{c(){Ee(e.$$.fragment),s=A(),c&&c.c(),n=A(),i=k("audio"),o=k("track"),M(o,"kind","captions"),Re(i.src,l=qt)||M(i,"src",l),M(i,"preload","auto"),i.controls=!0},m(h,p){_e(e,h,p),I(h,s,p),c&&c.m(h,p),I(h,n,p),I(h,i,p),g(i,o),t[23](i),r=!0,a||(u=[G(Ie,"resize",t[9]),G(Ie,"resize",t[14])],a=!0)},p(h,p){const m={};p[0]&1&&(m.width=h[0]-50),p[0]&16|p[1]&2048&&(m.$$scope={dirty:p,ctx:h}),e.$set(m),h[1]?c?(c.p(h,p),p[0]&2&&X(c,1)):(c=He(h),c.c(),X(c,1),c.m(n.parentNode,n)):c&&(Qe(),Q(c,1,1,()=>{c=null}),Ve())},i(h){r||(X(e.$$.fragment,h),X(c),r=!0)},o(h){Q(e.$$.fragment,h),Q(c),r=!1},d(h){t[15](null),be(e,h),h&&S(s),c&&c.d(h),h&&S(n),h&&S(i),t[23](null),a=!1,oe(u)}}}const Nt=.7,et=1e3;function Wt(t){const e=l=>String(l).padStart(2,"0");let s=t%1e3;t=(t-s)/1e3;let n=t%60;t=(t-n)/60;let i=t%60,o=(t-i)/60;return`${e(o)}:${e(i)}:${e(n)}.${e(s)}`}function Yt(t,e,s){let n,{img:i}=e,o;he.subscribe(f=>{o=f});let l;de.subscribe(f=>{s(12,l=f)}),window.devicePixelRatio=1;const r=o,a=o;let u=window.innerWidth;const w=Nt*Math.min(u/i.naturalWidth,et/i.naturalHeight),c=w*i.naturalWidth,h=w*i.naturalHeight;let p=(u-50)/2-c/2,m=[],R,y,B=0,W=!1,D=new Date;class z{constructor(T,j,d,C){this.width=c/a,this.height=h/r,this.i=T,this.j=j,this.correctPos={x:d.x,y:d.y},this.currentPos={x:C.x,y:C.y},this.path=null,this.borderpath=null,this.shape={},this.solved=!1}draw(T){const j=Math.min(this.width,this.height),d=.08*j,C=.2*j,v=.2*j;let b=this.currentPos.x+p;this.path=new Path2D,this.path.moveTo(b,this.currentPos.y),this.shape.top&&(this.path.lineTo(b+this.width*Math.abs(this.shape.top)-d,this.currentPos.y),this.path.bezierCurveTo(b+this.width*Math.abs(this.shape.top)-d,this.currentPos.y-v*Math.sign(this.shape.top)*.2,b+this.width*Math.abs(this.shape.top)-C,this.currentPos.y-v*Math.sign(this.shape.top),b+this.width*Math.abs(this.shape.top),this.currentPos.y-v*Math.sign(this.shape.top)),this.path.bezierCurveTo(b+this.width*Math.abs(this.shape.top)+C,this.currentPos.y-v*Math.sign(this.shape.top),b+this.width*Math.abs(this.shape.top)+d,this.currentPos.y-v*Math.sign(this.shape.top)*.2,b+this.width*Math.abs(this.shape.top)+d,this.currentPos.y)),this.path.lineTo(b+this.width,this.currentPos.y),this.shape.right&&(this.path.lineTo(b+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)-d),this.path.bezierCurveTo(b+this.width-v*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)-d,b+this.width-v*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)-C,b+this.width-v*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)),this.path.bezierCurveTo(b+this.width-v*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)+C,b+this.width-v*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)+d,b+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)+d)),this.path.lineTo(b+this.width,this.currentPos.y+this.height),this.shape.bottom&&(this.path.lineTo(b+this.width*Math.abs(this.shape.bottom)+d,this.currentPos.y+this.height),this.path.bezierCurveTo(b+this.width*Math.abs(this.shape.bottom)+d,this.currentPos.y+this.height+v*Math.sign(this.shape.bottom)*.2,b+this.width*Math.abs(this.shape.bottom)+C,this.currentPos.y+this.height+v*Math.sign(this.shape.bottom),b+this.width*Math.abs(this.shape.bottom),this.currentPos.y+this.height+v*Math.sign(this.shape.bottom)),this.path.bezierCurveTo(b+this.width*Math.abs(this.shape.bottom)-C,this.currentPos.y+this.height+v*Math.sign(this.shape.bottom),b+this.width*Math.abs(this.shape.bottom)-d,this.currentPos.y+this.height+v*Math.sign(this.shape.bottom)*.2,b+this.width*Math.abs(this.shape.bottom)-d,this.currentPos.y+this.height)),this.path.lineTo(b,this.currentPos.y+this.height),this.shape.left&&(this.path.lineTo(b,this.currentPos.y+this.height*Math.abs(this.shape.left)+d),this.path.bezierCurveTo(b+v*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)+d,b+v*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)+C,b+v*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)),this.path.bezierCurveTo(b+v*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)-C,b+v*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)-d,b,this.currentPos.y+this.height*Math.abs(this.shape.left)-d)),this.path.lineTo(b,this.currentPos.y),T.save(),T.clip(this.path);let x=i.naturalWidth/a,Y=i.naturalHeight/r,se=Math.min(x,Y)*v/j;T.drawImage(i,this.i*x-se,this.j*Y-se,x+se*2,Y+se*2,b-v,this.currentPos.y-v,this.width+v*2,this.height+v*2),T.restore(),T.stroke(this.path)}}function F(f,T,j){for(let d=0;d<f.length;d++)f[d].currentPos.x=Math.floor(Math.random()*T)-p,f[d].currentPos.y=Math.floor(Math.random()*j)}let U;function P(f,T){let j=U.getContext();for(let d=m.length-1;d>=0;d--)if(j.isPointInPath(m[d].path,f,T)){y=m[d];break}if(y){R={x:f-y.currentPos.x,y:T-y.currentPos.y};let d=m.splice(m.findIndex(C=>C.j==y.j&&C.i==y.i),1);m.push(d[0]),s(13,m)}}function V(f,T){R&&(y.currentPos.x=f-R.x,y.currentPos.y=T-R.y,s(13,m))}function Z(){B===m.length&&s(1,W=!0)}let J;function ie(){let f=null;if(y){let T=30;const j=m.findIndex(d=>d.j==y.j&&d.i==y.i);if(Math.abs(y.currentPos.x-y.correctPos.x)<T&&Math.abs(y.currentPos.y-y.correctPos.y)<T){J.play(),f=setTimeout(()=>{J.pause(),s(3,J.currentTime=0,J)},500),y.currentPos.x=y.correctPos.x,y.currentPos.y=y.correctPos.y;let d=m.splice(j,1);y.solved||(d[0].solved=!0,B=B+1),f&&clearTimeout(f),m.unshift(d[0]),s(13,m)}else y.solved&&(s(13,m[j].solved=!1,m),B=B-1);R=null,y=null}Z()}function ve(){p=(u-50)/2-c/2,U.redraw()}let q;function ee(){clearTimeout(q),q=setTimeout(ve,100)}const H=({context:f,width:T,height:j})=>{for(let C=0;C<a;C++)for(let v=0;v<r;v++){let b=C*c/a,x=j/2-h/2+v*h/r,Y=new z(C,v,{x:b,y:x},{x:b,y:x});m.push(Y)}let d=0;for(let C=0;C<a;C++)for(let v=0;v<r;v++){let b=v,x=C,Y=m[d];if(b==r-1)Y.shape.bottom=null;else{let se=Math.random()-.5<0?-1:1;Y.shape.bottom=se*(Math.random()*.4+.3)}if(x==a-1)Y.shape.right=null;else{let se=Math.random()-.5<0?-1:1;Y.shape.right=se*(Math.random()*.4+.3)}b==0?Y.shape.top=null:Y.shape.top=-m[d-1].shape.bottom,x==0?Y.shape.left=null:Y.shape.left=-m[d-r].shape.right,d++}F(m,T-c/a,j-h/r)};function Me(){s(0,u=Ie.innerWidth)}function te(f){ne[f?"unshift":"push"](()=>{U=f,s(2,U)})}const O=f=>{P(f.offsetX,f.offsetY)},E=f=>{V(f.offsetX,f.offsetY)},_=()=>{ie()},N=f=>P(f.touches[0].clientX,f.touches[0].clientY),L=f=>{V(f.touches[0].clientX,f.touches[0].clientY)},Pe=()=>{ie()},tt=()=>s(1,W=!1);function st(f){ne[f?"unshift":"push"](()=>{J=f,s(3,J)})}return t.$$set=f=>{"img"in f&&s(11,i=f.img)},t.$$.update=()=>{t.$$.dirty[0]&14336&&s(4,n=({context:f,width:T,height:j})=>{f.globalAlpha=l,f.drawImage(i,T/2-c/2,j/2-h/2,c,h),f.globalAlpha=1,l==0&&(f.beginPath(),f.rect(T/2-c/2,j/2-h/2,c,h),f.stroke());for(let d=0;d<m.length;d++)m[d].draw(f)})},[u,W,U,J,n,D,P,V,ie,ee,H,i,l,m,Me,te,O,E,_,N,L,Pe,tt,st]}class Bt extends we{constructor(e){super(),ye(this,e,Yt,At,ae,{img:11},null,[-1,-1])}}function Oe(t,e,s){const n=t.slice();return n[17]=e[s],n}function Ae(t){let e,s;return{c(){e=k("img"),Re(e.src,s=t[0])||M(e,"src",s),M(e,"alt","puzzle"),M(e,"width","700px")},m(n,i){I(n,e,i),t[14](e)},p(n,i){i&1&&!Re(e.src,s=n[0])&&M(e,"src",s)},d(n){n&&S(e),t[14](null)}}}function Ne(t){let e,s=t[17]+"",n;return{c(){e=k("option"),n=$(s),e.__value=t[17],e.value=e.__value},m(i,o){I(i,e,o),g(e,n)},p:K,d(i){i&&S(e)}}}function Dt(t){let e,s,n,i,o,l;return{c(){e=k("p"),s=$("Selected Hard ("),n=$(t[4]),i=$(" x "),o=$(t[4]),l=$(")")},m(r,a){I(r,e,a),g(e,s),g(e,n),g(e,i),g(e,o),g(e,l)},p(r,a){a&16&&ue(n,r[4]),a&16&&ue(o,r[4])},d(r){r&&S(e)}}}function Xt(t){let e,s,n,i,o,l;return{c(){e=k("p"),s=$("Selected Medium ("),n=$(t[4]),i=$(" x "),o=$(t[4]),l=$(")")},m(r,a){I(r,e,a),g(e,s),g(e,n),g(e,i),g(e,o),g(e,l)},p(r,a){a&16&&ue(n,r[4]),a&16&&ue(o,r[4])},d(r){r&&S(e)}}}function Ft(t){let e,s,n,i,o,l;return{c(){e=k("p"),s=$("Selected Easy ("),n=$(t[4]),i=$(" x "),o=$(t[4]),l=$(")")},m(r,a){I(r,e,a),g(e,s),g(e,n),g(e,i),g(e,o),g(e,l)},p(r,a){a&16&&ue(n,r[4]),a&16&&ue(o,r[4])},d(r){r&&S(e)}}}function We(t){let e,s;return e=new Bt({props:{img:t[2]}}),{c(){Ee(e.$$.fragment)},m(n,i){_e(e,n,i),s=!0},p(n,i){const o={};i&4&&(o.img=n[2]),e.$set(o)},i(n){s||(X(e.$$.fragment,n),s=!0)},o(n){Q(e.$$.fragment,n),s=!1},d(n){be(e,n)}}}function Jt(t){let e,s,n,i,o,l,r,a,u,w,c,h,p,m,R,y,B,W,D,z,F,U,P,V,Z,J,ie,ve,q=t[0]&&Ae(t),ee=t[6],H=[];for(let _=0;_<ee.length;_+=1)H[_]=Ne(Oe(t,ee,_));function Me(_,N){if(_[3]==="Easy")return Ft;if(_[3]==="Medium")return Xt;if(_[3]==="Hard")return Dt}let te=Me(t),O=te&&te(t),E=t[1]&&We(t);return{c(){e=k("main"),s=k("h1"),s.textContent="Create your own jigsaw!",n=A(),i=k("form"),o=k("input"),l=A(),r=k("div"),a=k("button"),a.textContent="Select image",u=A(),w=k("p"),w.textContent="or",c=A(),h=k("button"),h.textContent="Solve random image",p=A(),q&&q.c(),m=A(),R=k("select");for(let _=0;_<H.length;_+=1)H[_].c();y=A(),O&&O.c(),B=A(),W=k("div"),D=k("input"),z=A(),F=k("label"),F.innerHTML="<p>Background image</p>",U=A(),P=k("button"),P.textContent="Start",V=A(),E&&E.c(),Z=lt(),M(o,"type","file"),M(o,"id","img"),M(o,"name","img"),M(o,"accept","image/*"),M(i,"class","form-1"),M(a,"class","img-button"),M(r,"class","choose-or-random-buttons"),t[3]===void 0&&me(()=>t[15].call(R)),M(D,"type","checkbox"),D.checked=!0,M(D,"id","switch"),M(D,"class","checkbox"),M(F,"for","switch"),M(F,"class","toggle"),M(W,"class","background-image-checkbox-wrapper"),M(e,"class","container svelte-mporf1")},m(_,N){I(_,e,N),g(e,s),g(e,n),g(e,i),g(i,o),t[10](o),g(e,l),g(e,r),g(r,a),g(r,u),g(r,w),g(r,c),g(r,h),g(e,p),q&&q.m(e,null),g(e,m),g(e,R);for(let L=0;L<H.length;L+=1)H[L].m(R,null);$e(R,t[3]),g(e,y),O&&O.m(e,null),g(e,B),g(e,W),g(W,D),g(W,z),g(W,F),g(e,U),g(e,P),I(_,V,N),E&&E.m(_,N),I(_,Z,N),J=!0,ie||(ve=[G(o,"change",t[11]),G(a,"click",ht(t[12])),G(h,"click",t[13]),G(R,"change",t[15]),G(R,"click",t[8]),G(D,"click",t[9]),G(P,"click",t[7])],ie=!0)},p(_,[N]){if(_[0]?q?q.p(_,N):(q=Ae(_),q.c(),q.m(e,m)):q&&(q.d(1),q=null),N&64){ee=_[6];let L;for(L=0;L<ee.length;L+=1){const Pe=Oe(_,ee,L);H[L]?H[L].p(Pe,N):(H[L]=Ne(Pe),H[L].c(),H[L].m(R,null))}for(;L<H.length;L+=1)H[L].d(1);H.length=ee.length}N&72&&$e(R,_[3]),te===(te=Me(_))&&O?O.p(_,N):(O&&O.d(1),O=te&&te(_),O&&(O.c(),O.m(e,B))),_[1]?E?(E.p(_,N),N&2&&X(E,1)):(E=We(_),E.c(),X(E,1),E.m(Z.parentNode,Z)):E&&(Qe(),Q(E,1,1,()=>{E=null}),Ve())},i(_){J||(X(E),J=!0)},o(_){Q(E),J=!1},d(_){_&&S(e),t[10](null),q&&q.d(),ot(H,_),O&&O.d(),_&&S(V),E&&E.d(_),_&&S(Z),ie=!1,oe(ve)}}}function Gt(t,e,s){let n,i=!1,o;const l=["Easy","Medium","Hard"];let r=l[0];he.update(z=>5);let a;he.subscribe(z=>{s(4,a=z)}),de.update(z=>.4);let u;de.subscribe(z=>{u=z});function w(){n&&(s(1,i=!0),s(2,o.style.display="none",o))}function c(){r==="Easy"?he.update(z=>5):r==="Medium"?he.update(z=>7):r==="Hard"&&he.update(z=>10)}function h(){u>0?de.update(z=>0):de.update(z=>.4)}let p;function m(z){ne[z?"unshift":"push"](()=>{p=z,s(5,p)})}const R=z=>{let F=z.target.form[0].files[0];F&&s(0,n=URL.createObjectURL(F)),console.log(n)},y=()=>{p.click()},B=()=>s(0,n="https://picsum.photos/500?random="+Math.floor(Math.random()*1e3));function W(z){ne[z?"unshift":"push"](()=>{o=z,s(2,o)})}function D(){r=ct(this),s(3,r),s(6,l)}return[n,i,o,r,a,p,l,w,c,h,m,R,y,B,W,D]}class Kt extends we{constructor(e){super(),ye(this,e,Gt,Jt,ae,{})}}new Kt({target:document.getElementById("app")});
