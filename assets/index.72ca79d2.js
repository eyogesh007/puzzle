(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function F(){}function nt(t,e){for(const s in e)t[s]=e[s];return t}function Ye(t){return t()}function Le(){return Object.create(null)}function ne(t){t.forEach(Ye)}function Be(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Pe;function Re(t,e){return Pe||(Pe=document.createElement("a")),Pe.href=e,t===Pe.href}function it(t){return Object.keys(t).length===0}function De(t,e,s,n){if(t){const i=Xe(t,e,s,n);return t[0](i)}}function Xe(t,e,s,n){return t[1]&&n?nt(s.ctx.slice(),t[1](n(e))):s.ctx}function Fe(t,e,s,n){if(t[2]&&n){const i=t[2](n(s));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],h=Math.max(e.dirty.length,i.length);for(let r=0;r<h;r+=1)o[r]=e.dirty[r]|i[r];return o}return e.dirty|i}return e.dirty}function Je(t,e,s,n,i,o){if(i){const h=Xe(e,s,n,o);t.p(h,i)}}function Ge(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let n=0;n<s;n++)e[n]=-1;return e}return-1}function rt(t){return t&&Be(t.destroy)?t.destroy:F}function g(t,e){t.appendChild(e)}function T(t,e,s){t.insertBefore(e,s||null)}function z(t){t.parentNode.removeChild(t)}function ot(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function v(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function L(){return S(" ")}function lt(){return S("")}function X(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function ut(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function at(t,e,s,n){s===null?t.style.removeProperty(e):t.style.setProperty(e,s,n?"important":"")}function qe(t,e){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function ct(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ft(t,e,{bubbles:s=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,s,n,e),i}let pe;function de(t){pe=t}function he(){if(!pe)throw new Error("Function called outside component initialization");return pe}function dt(t){he().$$.on_mount.push(t)}function Ke(t){he().$$.on_destroy.push(t)}function pt(){const t=he();return(e,s,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=ft(e,s,{cancelable:n});return i.slice().forEach(h=>{h.call(t,o)}),!o.defaultPrevented}return!0}}function gt(t,e){return he().$$.context.set(t,e),e}function mt(t){return he().$$.context.get(t)}function _t(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(n=>n.call(this,e))}const ce=[],ee=[],ze=[],He=[],bt=Promise.resolve();let je=!1;function yt(){je||(je=!0,bt.then(Ue))}function ge(t){ze.push(t)}const Se=new Set;let ke=0;function Ue(){const t=pe;do{for(;ke<ce.length;){const e=ce[ke];ke++,de(e),wt(e.$$)}for(de(null),ce.length=0,ke=0;ee.length;)ee.pop()();for(let e=0;e<ze.length;e+=1){const s=ze[e];Se.has(s)||(Se.add(s),s())}ze.length=0}while(ce.length);for(;He.length;)He.pop()();je=!1,Se.clear(),de(t)}function wt(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ge)}}const Ce=new Set;let se;function Qe(){se={r:0,c:[],p:se}}function Ve(){se.r||ne(se.c),se=se.p}function N(t,e){t&&t.i&&(Ce.delete(t),t.i(e))}function K(t,e,s,n){if(t&&t.o){if(Ce.has(t))return;Ce.add(t),se.c.push(()=>{Ce.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}else n&&n()}const vt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Te(t){t&&t.c()}function me(t,e,s,n){const{fragment:i,on_mount:o,on_destroy:h,after_update:r}=t.$$;i&&i.m(e,s),n||ge(()=>{const c=o.map(Ye).filter(Be);h?h.push(...c):ne(c),t.$$.on_mount=[]}),r.forEach(ge)}function _e(t,e){const s=t.$$;s.fragment!==null&&(ne(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function Mt(t,e){t.$$.dirty[0]===-1&&(ce.push(t),yt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,s,n,i,o,h,r=[-1]){const c=pe;de(t);const l=t.$$={fragment:null,ctx:null,props:o,update:F,not_equal:i,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Le(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};h&&h(l.root);let a=!1;if(l.ctx=s?s(t,e.props||{},(f,u,...d)=>{const m=d.length?d[0]:u;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),a&&Mt(t,f)),u}):[],l.update(),a=!0,ne(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const f=ut(e.target);l.fragment&&l.fragment.l(f),f.forEach(z)}else l.fragment&&l.fragment.c();e.intro&&N(t.$$.fragment),me(t,e.target,e.anchor,e.customElement),Ue()}de(c)}class ye{$destroy(){_e(this,1),this.$destroy=F}$on(e,s){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(s),()=>{const i=n.indexOf(s);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!it(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function kt(){const t=he();return e=>{const s=Pt.map(n=>X(e,n,i=>_t(t,i)));return{destroy:()=>s.forEach(n=>n())}}}class zt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:s,context:n,width:i,height:o}){const h={context:n,width:i,height:o};if(this.needsResize&&(n.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[r,c]of this.setups)c(h),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e&&n.clearRect(0,0,i,o);for(const r of this.layerSequence)this.renderers.get(r)(h);this.needsRedraw=!1}}}function Ct(t){let e,s,n,i,o,h,r,c,l;const a=t[13].default,f=De(a,t,t[12],null);return{c(){e=v("canvas"),o=L(),h=v("div"),f&&f.c(),y(e,"style",s="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")),y(e,"width",n=t[1]*t[0]),y(e,"height",i=t[2]*t[0]),at(h,"display","none")},m(u,d){T(u,e,d),t[14](e),T(u,o,d),T(u,h,d),f&&f.m(h,null),t[15](h),r=!0,c||(l=rt(t[6].call(null,e)),c=!0)},p(u,[d]){(!r||d&14&&s!==(s="display: block; width: "+u[1]+"px; height: "+u[2]+"px;"+(u[3]?` ${u[3]}`:"")))&&y(e,"style",s),(!r||d&3&&n!==(n=u[1]*u[0]))&&y(e,"width",n),(!r||d&5&&i!==(i=u[2]*u[0]))&&y(e,"height",i),f&&f.p&&(!r||d&4096)&&Je(f,a,u,u[12],r?Fe(a,u[12],d,null):Ge(u[12]),null)},i(u){r||(N(f,u),r=!0)},o(u){K(f,u),r=!1},d(u){u&&z(e),t[14](null),u&&z(o),u&&z(h),f&&f.d(u),t[15](null),c=!1,l()}}}const Ze={};function Tt(t,e,s){let{$$slots:n={},$$scope:i}=e,{width:o=640,height:h=640,pixelRatio:r=void 0,style:c=null,autoclear:l=!0}=e,a,f,u,d,m;const C=kt(),b=new zt;function $(){b.redraw()}function O(){return a}function q(){return f}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function M(){b.render({context:f,width:o,height:h,pixelRatio:r,autoclear:l}),u=window.requestAnimationFrame(M)}gt(Ze,{register:b.register,unregister:b.unregister,redraw:b.redraw}),dt(()=>{f=a.getContext("2d"),m=new MutationObserver(w),m.observe(d,{childList:!0}),w(),M();function w(){const U=[...d.children].map(Q=>+Q.dataset.layerId);s(11,b.layerSequence=U,b),b.redraw()}}),Ke(()=>{typeof window>"u"||(window.cancelAnimationFrame(u),m.disconnect())});function W(w){ee[w?"unshift":"push"](()=>{a=w,s(4,a)})}function J(w){ee[w?"unshift":"push"](()=>{d=w,s(5,d)})}return t.$$set=w=>{"width"in w&&s(1,o=w.width),"height"in w&&s(2,h=w.height),"pixelRatio"in w&&s(0,r=w.pixelRatio),"style"in w&&s(3,c=w.style),"autoclear"in w&&s(7,l=w.autoclear),"$$scope"in w&&s(12,i=w.$$scope)},t.$$.update=()=>{t.$$.dirty&2183&&b.resize()},[r,o,h,c,a,d,C,l,$,O,q,b,i,n,W,J]}class Et extends ye{constructor(e){super(),be(this,e,Tt,Ct,le,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function St(t){let e;return{c(){e=v("div"),y(e,"data-layer-id",t[0])},m(s,n){T(s,e,n)},p:F,i:F,o:F,d(s){s&&z(e)}}}function Rt(t,e,s){const{register:n,unregister:i,redraw:o}=mt(Ze);let{setup:h=void 0,render:r=()=>{}}=e;if(typeof h!="function"&&h!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const c=n({setup:h,render:r});return Ke(()=>i(c)),t.$$set=l=>{"setup"in l&&s(1,h=l.setup),"render"in l&&s(2,r=l.render)},t.$$.update=()=>{t.$$.dirty&4&&o()},[c,h,r]}class jt extends ye{constructor(e){super(),be(this,e,Rt,St,le,{setup:1,render:2})}}const ie=[];function xe(t,e=F){let s;const n=new Set;function i(r){if(le(t,r)&&(t=r,s)){const c=!ie.length;for(const l of n)l[1](),ie.push(l,t);if(c){for(let l=0;l<ie.length;l+=2)ie[l][0](ie[l+1]);ie.length=0}}}function o(r){i(r(t))}function h(r,c=F){const l=[r,c];return n.add(l),n.size===1&&(s=e(i)||F),r(t),()=>{n.delete(l),n.size===0&&(s(),s=null)}}return{set:i,update:o,subscribe:h}}function It(t){let e,s,n,i,o,h,r;const c=t[2].default,l=De(c,t,t[1],null);return{c(){e=v("div"),s=v("span"),s.textContent="\u2715",n=L(),i=v("div"),l&&l.c(),y(s,"class","svelte-dlh49t"),y(i,"class","modal-content svelte-dlh49t"),y(e,"class","modal svelte-dlh49t")},m(a,f){T(a,e,f),g(e,s),g(e,n),g(e,i),l&&l.m(i,null),o=!0,h||(r=X(s,"click",t[0]),h=!0)},p(a,[f]){l&&l.p&&(!o||f&2)&&Je(l,c,a,a[1],o?Fe(c,a[1],f,null):Ge(a[1]),null)},i(a){o||(N(l,a),o=!0)},o(a){K(l,a),o=!1},d(a){a&&z(e),l&&l.d(a),h=!1,r()}}}function Lt(t,e,s){let{$$slots:n={},$$scope:i}=e;const o=pt(),h=()=>o("close");return t.$$set=r=>{"$$scope"in r&&s(1,i=r.$$scope)},[h,i,n]}class qt extends ye{constructor(e){super(),be(this,e,Lt,It,le,{})}}const Ht="/jigsaw-svelte/assets/puzzle.7b2c6e4e.wav";class Ot{constructor(e,s,n,i,o,h){this.width=o,this.height=h,this.i=e,this.j=s,this.correctPos={x:n.x,y:n.y},this.currentPos={x:i.x,y:i.y},this.path=null,this.borderpath=null,this.shape={},this.solved=!1}draw(e,s,n,i,o=i){const h=Math.min(this.width,this.height),r=.08*h,c=.2*h,l=.2*h;let a=this.currentPos.x+n;this.path=new Path2D,this.path.moveTo(a,this.currentPos.y),this.shape.top&&(this.path.lineTo(a+this.width*Math.abs(this.shape.top)-r,this.currentPos.y),this.path.bezierCurveTo(a+this.width*Math.abs(this.shape.top)-r,this.currentPos.y-l*Math.sign(this.shape.top)*.2,a+this.width*Math.abs(this.shape.top)-c,this.currentPos.y-l*Math.sign(this.shape.top),a+this.width*Math.abs(this.shape.top),this.currentPos.y-l*Math.sign(this.shape.top)),this.path.bezierCurveTo(a+this.width*Math.abs(this.shape.top)+c,this.currentPos.y-l*Math.sign(this.shape.top),a+this.width*Math.abs(this.shape.top)+r,this.currentPos.y-l*Math.sign(this.shape.top)*.2,a+this.width*Math.abs(this.shape.top)+r,this.currentPos.y)),this.path.lineTo(a+this.width,this.currentPos.y),this.shape.right&&(this.path.lineTo(a+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)-r),this.path.bezierCurveTo(a+this.width-l*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)-r,a+this.width-l*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)-c,a+this.width-l*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)),this.path.bezierCurveTo(a+this.width-l*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)+c,a+this.width-l*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)+r,a+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)+r)),this.path.lineTo(a+this.width,this.currentPos.y+this.height),this.shape.bottom&&(this.path.lineTo(a+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height),this.path.bezierCurveTo(a+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height+l*Math.sign(this.shape.bottom)*.2,a+this.width*Math.abs(this.shape.bottom)+c,this.currentPos.y+this.height+l*Math.sign(this.shape.bottom),a+this.width*Math.abs(this.shape.bottom),this.currentPos.y+this.height+l*Math.sign(this.shape.bottom)),this.path.bezierCurveTo(a+this.width*Math.abs(this.shape.bottom)-c,this.currentPos.y+this.height+l*Math.sign(this.shape.bottom),a+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height+l*Math.sign(this.shape.bottom)*.2,a+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height)),this.path.lineTo(a,this.currentPos.y+this.height),this.shape.left&&(this.path.lineTo(a,this.currentPos.y+this.height*Math.abs(this.shape.left)+r),this.path.bezierCurveTo(a+l*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)+r,a+l*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)+c,a+l*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)),this.path.bezierCurveTo(a+l*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)-c,a+l*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)-r,a,this.currentPos.y+this.height*Math.abs(this.shape.left)-r)),this.path.lineTo(a,this.currentPos.y),e.save(),e.clip(this.path);let f=s.naturalWidth/o,u=s.naturalHeight/i,d=Math.min(f,u)*l/h;e.drawImage(s,this.i*f-d,this.j*u-d,f+d*2,u+d*2,a-l,this.currentPos.y-l,this.width+l*2,this.height+l*2),e.restore(),e.stroke(this.path)}}const At=t=>{const e=h=>String(h).padStart(2,"0");let s=t%1e3;t=(t-s)/1e3;let n=t%60;t=(t-n)/60;let i=t%60,o=(t-i)/60;return`${e(o)}:${e(i)}:${e(n)}.${e(s)}`},re=xe(0),fe=xe(0);const{window:Ie}=vt;function $t(t){let e,s;return e=new jt({props:{render:t[5],setup:t[11]}}),{c(){Te(e.$$.fragment)},m(n,i){me(e,n,i),s=!0},p(n,i){const o={};i[0]&32&&(o.render=n[5]),e.$set(o)},i(n){s||(N(e.$$.fragment,n),s=!0)},o(n){K(e.$$.fragment,n),s=!1},d(n){_e(e,n)}}}function Oe(t){let e,s;return e=new qt({props:{$$slots:{default:[Nt]},$$scope:{ctx:t}}}),e.$on("close",t[24]),{c(){Te(e.$$.fragment)},m(n,i){me(e,n,i),s=!0},p(n,i){const o={};i[1]&2048&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){s||(N(e.$$.fragment,n),s=!0)},o(n){K(e.$$.fragment,n),s=!1},d(n){_e(e,n)}}}function Nt(t){let e,s,n;return{c(){e=v("h2"),e.textContent="Puzzle solved!",s=L(),n=v("p"),n.textContent=`Your time: ${At(new Date-t[6])}`,y(n,"class","modal-text svelte-kb13dz")},m(i,o){T(i,e,o),T(i,s,o),T(i,n,o)},p:F,d(i){i&&z(e),i&&z(s),i&&z(n)}}}function Wt(t){let e,s,n,i,o,h,r,c,l;ge(t[16]);let a={width:t[0]-50,height:et,style:"margin: 0 auto; border: 1px solid black; cursor: "+t[1],$$slots:{default:[$t]},$$scope:{ctx:t}};e=new Et({props:a}),t[17](e),e.$on("mousedown",t[18]),e.$on("mousemove",t[19]),e.$on("mouseup",t[20]),e.$on("touchstart",t[21]),e.$on("touchmove",t[22]),e.$on("touchend",t[23]);let f=t[2]&&Oe(t);return{c(){Te(e.$$.fragment),s=L(),f&&f.c(),n=L(),i=v("audio"),o=v("track"),y(o,"kind","captions"),Re(i.src,h=Ht)||y(i,"src",h),y(i,"preload","auto"),i.controls=!0},m(u,d){me(e,u,d),T(u,s,d),f&&f.m(u,d),T(u,n,d),T(u,i,d),g(i,o),t[25](i),r=!0,c||(l=[X(Ie,"resize",t[10]),X(Ie,"resize",t[16])],c=!0)},p(u,d){const m={};d[0]&1&&(m.width=u[0]-50),d[0]&2&&(m.style="margin: 0 auto; border: 1px solid black; cursor: "+u[1]),d[0]&32|d[1]&2048&&(m.$$scope={dirty:d,ctx:u}),e.$set(m),u[2]?f?(f.p(u,d),d[0]&4&&N(f,1)):(f=Oe(u),f.c(),N(f,1),f.m(n.parentNode,n)):f&&(Qe(),K(f,1,1,()=>{f=null}),Ve())},i(u){r||(N(e.$$.fragment,u),N(f),r=!0)},o(u){K(e.$$.fragment,u),K(f),r=!1},d(u){t[17](null),_e(e,u),u&&z(s),f&&f.d(u),u&&z(n),u&&z(i),t[25](null),c=!1,ne(l)}}}const Yt=.7,et=1e3;function Bt(t,e,s){let n,{img:i}=e,o;re.subscribe(p=>{o=p});let h;fe.subscribe(p=>{s(13,h=p)}),window.devicePixelRatio=1;const r=o,c=o;let l=window.innerWidth;const a=Yt*Math.min(l/i.naturalWidth,et/i.naturalHeight),f=a*i.naturalWidth,u=a*i.naturalHeight;let d=(l-50)/2-f/2,m=[],C,b,$=0,O="",q=!1,M=new Date;function W(p,A,B){for(let P=0;P<p.length;P++)p[P].currentPos.x=Math.floor(Math.random()*A)-d,p[P].currentPos.y=Math.floor(Math.random()*B)}let J;function w(p,A){let B=J.getContext();for(let P=m.length-1;P>=0;P--)if(B.isPointInPath(m[P].path,p,A)){b=m[P];break}if(b){s(1,O="grab"),C={x:p-b.currentPos.x,y:A-b.currentPos.y};let P=m.splice(m.findIndex(D=>D.j==b.j&&D.i==b.i),1);m.push(P[0]),s(15,m)}}function U(p,A){C&&(b.currentPos.x=p-C.x,b.currentPos.y=A-C.y,s(15,m))}function Q(){$===m.length&&s(2,q=!0)}let Y;function te(){let p=null;if(b){s(1,O="default");let A=30;const B=m.findIndex(P=>P.j==b.j&&P.i==b.i);if(Math.abs(b.currentPos.x-b.correctPos.x)<A&&Math.abs(b.currentPos.y-b.correctPos.y)<A){Y.play(),p=setTimeout(()=>{Y.pause(),s(4,Y.currentTime=0,Y)},500),b.currentPos.x=b.correctPos.x,b.currentPos.y=b.correctPos.y;let P=m.splice(B,1);b.solved||(P[0].solved=!0,$=$+1),p&&clearTimeout(p),m.unshift(P[0]),s(15,m)}else b.solved&&(s(15,m[B].solved=!1,m),$=$-1);C=null,b=null}Q()}function we(){s(14,d=(l-50)/2-f/2),J.redraw()}let R;function V(){clearTimeout(R),R=setTimeout(we,100)}const j=({context:p,width:A,height:B})=>{for(let D=0;D<c;D++)for(let x=0;x<r;x++){let ue=D*f/c,ae=B/2-u/2+x*u/r,G=new Ot(D,x,{x:ue,y:ae},{x:ue,y:ae},f/c,u/r);m.push(G)}let P=0;for(let D=0;D<c;D++)for(let x=0;x<r;x++){let ue=x,ae=D,G=m[P];if(ue==r-1)G.shape.bottom=null;else{let Ee=Math.random()-.5<0?-1:1;G.shape.bottom=Ee*(Math.random()*.4+.3)}if(ae==c-1)G.shape.right=null;else{let Ee=Math.random()-.5<0?-1:1;G.shape.right=Ee*(Math.random()*.4+.3)}ue==0?G.shape.top=null:G.shape.top=-m[P-1].shape.bottom,ae==0?G.shape.left=null:G.shape.left=-m[P-r].shape.right,P++}W(m,A-f/c,B-u/r)};function ve(){s(0,l=Ie.innerWidth)}function Z(p){ee[p?"unshift":"push"](()=>{J=p,s(3,J)})}const I=p=>{w(p.offsetX,p.offsetY)},k=p=>{U(p.offsetX,p.offsetY)},_=()=>{te()},H=p=>w(p.touches[0].clientX,p.touches[0].clientY),E=p=>{U(p.touches[0].clientX,p.touches[0].clientY)},Me=()=>{te()},tt=()=>s(2,q=!1);function st(p){ee[p?"unshift":"push"](()=>{Y=p,s(4,Y)})}return t.$$set=p=>{"img"in p&&s(12,i=p.img)},t.$$.update=()=>{t.$$.dirty[0]&61440&&s(5,n=({context:p,width:A,height:B})=>{p.globalAlpha=h,p.drawImage(i,A/2-f/2,B/2-u/2,f,u),p.globalAlpha=1,h==0&&(p.beginPath(),p.rect(A/2-f/2,B/2-u/2,f,u),p.stroke());for(let P=0;P<m.length;P++)m[P].draw(p,i,d,r)})},[l,O,q,J,Y,n,M,w,U,te,V,j,i,h,d,m,ve,Z,I,k,_,H,E,Me,tt,st]}class Dt extends ye{constructor(e){super(),be(this,e,Bt,Wt,le,{img:12},null,[-1,-1])}}function Ae(t,e,s){const n=t.slice();return n[17]=e[s],n}function $e(t){let e,s;return{c(){e=v("img"),Re(e.src,s=t[0])||y(e,"src",s),y(e,"alt","puzzle"),y(e,"width","700px")},m(n,i){T(n,e,i),t[14](e)},p(n,i){i&1&&!Re(e.src,s=n[0])&&y(e,"src",s)},d(n){n&&z(e),t[14](null)}}}function Ne(t){let e,s=t[17]+"",n;return{c(){e=v("option"),n=S(s),e.__value=t[17],e.value=e.__value},m(i,o){T(i,e,o),g(e,n)},p:F,d(i){i&&z(e)}}}function Xt(t){let e,s,n,i,o,h;return{c(){e=v("p"),s=S("Selected Hard ("),n=S(t[4]),i=S(" x "),o=S(t[4]),h=S(")")},m(r,c){T(r,e,c),g(e,s),g(e,n),g(e,i),g(e,o),g(e,h)},p(r,c){c&16&&oe(n,r[4]),c&16&&oe(o,r[4])},d(r){r&&z(e)}}}function Ft(t){let e,s,n,i,o,h;return{c(){e=v("p"),s=S("Selected Medium ("),n=S(t[4]),i=S(" x "),o=S(t[4]),h=S(")")},m(r,c){T(r,e,c),g(e,s),g(e,n),g(e,i),g(e,o),g(e,h)},p(r,c){c&16&&oe(n,r[4]),c&16&&oe(o,r[4])},d(r){r&&z(e)}}}function Jt(t){let e,s,n,i,o,h;return{c(){e=v("p"),s=S("Selected Easy ("),n=S(t[4]),i=S(" x "),o=S(t[4]),h=S(")")},m(r,c){T(r,e,c),g(e,s),g(e,n),g(e,i),g(e,o),g(e,h)},p(r,c){c&16&&oe(n,r[4]),c&16&&oe(o,r[4])},d(r){r&&z(e)}}}function We(t){let e,s;return e=new Dt({props:{img:t[2]}}),{c(){Te(e.$$.fragment)},m(n,i){me(e,n,i),s=!0},p(n,i){const o={};i&4&&(o.img=n[2]),e.$set(o)},i(n){s||(N(e.$$.fragment,n),s=!0)},o(n){K(e.$$.fragment,n),s=!1},d(n){_e(e,n)}}}function Gt(t){let e,s,n,i,o,h,r,c,l,a,f,u,d,m,C,b,$,O,q,M,W,J,w,U,Q,Y,te,we,R=t[0]&&$e(t),V=t[6],j=[];for(let _=0;_<V.length;_+=1)j[_]=Ne(Ae(t,V,_));function ve(_,H){if(_[3]==="Easy")return Jt;if(_[3]==="Medium")return Ft;if(_[3]==="Hard")return Xt}let Z=ve(t),I=Z&&Z(t),k=t[1]&&We(t);return{c(){e=v("main"),s=v("h1"),s.textContent="Create your own jigsaw!",n=L(),i=v("form"),o=v("input"),h=L(),r=v("div"),c=v("button"),c.textContent="Select image",l=L(),a=v("p"),a.textContent="or",f=L(),u=v("button"),u.textContent="Solve random image",d=L(),R&&R.c(),m=L(),C=v("select");for(let _=0;_<j.length;_+=1)j[_].c();b=L(),I&&I.c(),$=L(),O=v("div"),q=v("input"),M=L(),W=v("label"),W.innerHTML="<p>Background image</p>",J=L(),w=v("button"),w.textContent="Start",U=L(),k&&k.c(),Q=lt(),y(o,"type","file"),y(o,"id","img"),y(o,"name","img"),y(o,"accept","image/*"),y(i,"class","form-1"),y(c,"class","img-button"),y(r,"class","choose-or-random-buttons"),t[3]===void 0&&ge(()=>t[15].call(C)),y(q,"type","checkbox"),q.checked=!0,y(q,"id","switch"),y(q,"class","checkbox"),y(W,"for","switch"),y(W,"class","toggle"),y(O,"class","background-image-checkbox-wrapper"),y(e,"class","container svelte-mporf1")},m(_,H){T(_,e,H),g(e,s),g(e,n),g(e,i),g(i,o),t[10](o),g(e,h),g(e,r),g(r,c),g(r,l),g(r,a),g(r,f),g(r,u),g(e,d),R&&R.m(e,null),g(e,m),g(e,C);for(let E=0;E<j.length;E+=1)j[E].m(C,null);qe(C,t[3]),g(e,b),I&&I.m(e,null),g(e,$),g(e,O),g(O,q),g(O,M),g(O,W),g(e,J),g(e,w),T(_,U,H),k&&k.m(_,H),T(_,Q,H),Y=!0,te||(we=[X(o,"change",t[11]),X(c,"click",ht(t[12])),X(u,"click",t[13]),X(C,"change",t[15]),X(C,"click",t[8]),X(q,"click",t[9]),X(w,"click",t[7])],te=!0)},p(_,[H]){if(_[0]?R?R.p(_,H):(R=$e(_),R.c(),R.m(e,m)):R&&(R.d(1),R=null),H&64){V=_[6];let E;for(E=0;E<V.length;E+=1){const Me=Ae(_,V,E);j[E]?j[E].p(Me,H):(j[E]=Ne(Me),j[E].c(),j[E].m(C,null))}for(;E<j.length;E+=1)j[E].d(1);j.length=V.length}H&72&&qe(C,_[3]),Z===(Z=ve(_))&&I?I.p(_,H):(I&&I.d(1),I=Z&&Z(_),I&&(I.c(),I.m(e,$))),_[1]?k?(k.p(_,H),H&2&&N(k,1)):(k=We(_),k.c(),N(k,1),k.m(Q.parentNode,Q)):k&&(Qe(),K(k,1,1,()=>{k=null}),Ve())},i(_){Y||(N(k),Y=!0)},o(_){K(k),Y=!1},d(_){_&&z(e),t[10](null),R&&R.d(),ot(j,_),I&&I.d(),_&&z(U),k&&k.d(_),_&&z(Q),te=!1,ne(we)}}}function Kt(t,e,s){let n,i=!1,o;const h=["Easy","Medium","Hard"];let r=h[0];re.update(M=>5);let c;re.subscribe(M=>{s(4,c=M)}),fe.update(M=>.4);let l;fe.subscribe(M=>{l=M});function a(){n&&(s(1,i=!0),s(2,o.style.display="none",o))}function f(){r==="Easy"?re.update(M=>5):r==="Medium"?re.update(M=>7):r==="Hard"&&re.update(M=>10)}function u(){l>0?fe.update(M=>0):fe.update(M=>.4)}let d;function m(M){ee[M?"unshift":"push"](()=>{d=M,s(5,d)})}const C=M=>{let W=M.target.form[0].files[0];W&&s(0,n=URL.createObjectURL(W)),console.log(n)},b=()=>{d.click()},$=()=>s(0,n="https://picsum.photos/500?random="+Math.floor(Math.random()*1e3));function O(M){ee[M?"unshift":"push"](()=>{o=M,s(2,o)})}function q(){r=ct(this),s(3,r),s(6,h)}return[n,i,o,r,c,d,h,a,f,u,m,C,b,$,O,q]}class Ut extends ye{constructor(e){super(),be(this,e,Kt,Gt,le,{})}}new Ut({target:document.getElementById("app")});
