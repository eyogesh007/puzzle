(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function I(){}const ze=t=>t;function jt(t,e){for(const n in e)t[n]=e[n];return t}function ut(t){return t()}function We(){return Object.create(null)}function D(t){t.forEach(ut)}function pe(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ge;function fe(t,e){return ge||(ge=document.createElement("a")),ge.href=e,t===ge.href}function Lt(t){return Object.keys(t).length===0}function It(t,...e){if(t==null)return I;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ye(t,e,n){t.$$.on_destroy.push(It(e,n))}function Le(t,e,n,s){if(t){const i=at(t,e,n,s);return t[0](i)}}function at(t,e,n,s){return t[1]&&s?jt(n.ctx.slice(),t[1](s(e))):n.ctx}function Ie(t,e,n,s){if(t[2]&&s){const i=t[2](s(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(e.dirty.length,i.length);for(let r=0;r<l;r+=1)o[r]=e.dirty[r]|i[r];return o}return e.dirty|i}return e.dirty}function qe(t,e,n,s,i,o){if(i){const l=at(e,n,s,o);t.p(l,i)}}function Oe(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Ge(t,e,n){return t.set(n),e}function qt(t){return t&&pe(t.destroy)?t.destroy:I}const ct=typeof window<"u";let Ae=ct?()=>window.performance.now():()=>Date.now(),De=ct?t=>requestAnimationFrame(t):I;const x=new Set;function ft(t){x.forEach(e=>{e.c(t)||(x.delete(e),e.f())}),x.size!==0&&De(ft)}function Fe(t){let e;return x.size===0&&De(ft),{promise:new Promise(n=>{x.add(e={c:t,f:n})}),abort(){x.delete(e)}}}function v(t,e){t.appendChild(e)}function ht(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ot(t){const e=M("style");return At(ht(t),e),e.sheet}function At(t,e){return v(t.head||t,e),e.sheet}function k(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function Dt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function E(){return S(" ")}function Ft(){return S("")}function L(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Nt(t){return Array.from(t.childNodes)}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Bt(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function Xe(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function Wt(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Je(t,e,n){t.classList[n?"add":"remove"](e)}function dt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}const ve=new Map;let ke=0;function Yt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Gt(t,e){const n={stylesheet:Ot(e),rules:{}};return ve.set(t,n),n}function Me(t,e,n,s,i,o,l,r=0){const u=16.666/s;let a=`{
`;for(let g=0;g<=1;g+=u){const p=e+(n-e)*o(g);a+=g*100+`%{${l(p,1-p)}}
`}const h=a+`100% {${l(n,1-n)}}
}`,d=`__svelte_${Yt(h)}_${r}`,c=ht(t),{stylesheet:f,rules:m}=ve.get(c)||Gt(c,t);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${h}`,f.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${d} ${s}ms linear ${i}ms 1 both`,ke+=1,d}function Pe(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-s.length;i&&(t.style.animation=s.join(", "),ke-=i,ke||Xt())}function Xt(){De(()=>{ke||(ve.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&w(e)}),ve.clear())})}let he;function ce(t){he=t}function ne(){if(!he)throw new Error("Function called outside component initialization");return he}function Jt(t){ne().$$.on_mount.push(t)}function pt(t){ne().$$.on_destroy.push(t)}function Kt(){const t=ne();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=dt(e,n,{cancelable:s});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}function Ut(t,e){return ne().$$.context.set(t,e),e}function Qt(t){return ne().$$.context.get(t)}function Vt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const ue=[],G=[],ye=[],Ke=[],Zt=Promise.resolve();let Te=!1;function xt(){Te||(Te=!0,Zt.then(mt))}function W(t){ye.push(t)}const Ce=new Set;let be=0;function mt(){const t=he;do{for(;be<ue.length;){const e=ue[be];be++,ce(e),en(e.$$)}for(ce(null),ue.length=0,be=0;G.length;)G.pop()();for(let e=0;e<ye.length;e+=1){const n=ye[e];Ce.has(n)||(Ce.add(n),n())}ye.length=0}while(ue.length);for(;Ke.length;)Ke.pop()();Te=!1,Ce.clear(),ce(t)}function en(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}let le;function He(){return le||(le=Promise.resolve(),le.then(()=>{le=null})),le}function K(t,e,n){t.dispatchEvent(dt(`${e?"intro":"outro"}${n}`))}const we=new Set;let B;function Ee(){B={r:0,c:[],p:B}}function Se(){B.r||D(B.c),B=B.p}function R(t,e){t&&t.i&&(we.delete(t),t.i(e))}function A(t,e,n,s){if(t&&t.o){if(we.has(t))return;we.add(t),B.c.push(()=>{we.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const Ne={duration:0};function tn(t,e,n){let s=e(t,n),i=!1,o,l,r=0;function u(){o&&Pe(t,o)}function a(){const{delay:d=0,duration:c=300,easing:f=ze,tick:m=I,css:_}=s||Ne;_&&(o=Me(t,0,1,c,d,f,_,r++)),m(0,1);const g=Ae()+d,p=g+c;l&&l.abort(),i=!0,W(()=>K(t,!0,"start")),l=Fe($=>{if(i){if($>=p)return m(1,0),K(t,!0,"end"),u(),i=!1;if($>=g){const z=f(($-g)/c);m(z,1-z)}}return i})}let h=!1;return{start(){h||(h=!0,Pe(t),pe(s)?(s=s(),He().then(a)):a())},invalidate(){h=!1},end(){i&&(u(),i=!1)}}}function nn(t,e,n){let s=e(t,n),i=!0,o;const l=B;l.r+=1;function r(){const{delay:u=0,duration:a=300,easing:h=ze,tick:d=I,css:c}=s||Ne;c&&(o=Me(t,1,0,a,u,h,c));const f=Ae()+u,m=f+a;W(()=>K(t,!1,"start")),Fe(_=>{if(i){if(_>=m)return d(0,1),K(t,!1,"end"),--l.r||D(l.c),!1;if(_>=f){const g=h((_-f)/a);d(1-g,g)}}return i})}return pe(s)?He().then(()=>{s=s(),r()}):r(),{end(u){u&&s.tick&&s.tick(1,0),i&&(o&&Pe(t,o),i=!1)}}}function Ue(t,e,n,s){let i=e(t,n),o=s?0:1,l=null,r=null,u=null;function a(){u&&Pe(t,u)}function h(c,f){const m=c.b-o;return f*=Math.abs(m),{a:o,b:c.b,d:m,duration:f,start:c.start,end:c.start+f,group:c.group}}function d(c){const{delay:f=0,duration:m=300,easing:_=ze,tick:g=I,css:p}=i||Ne,$={start:Ae()+f,b:c};c||($.group=B,B.r+=1),l||r?r=$:(p&&(a(),u=Me(t,o,c,m,f,_,p)),c&&g(0,1),l=h($,m),W(()=>K(t,c,"start")),Fe(z=>{if(r&&z>r.start&&(l=h(r,m),r=null,K(t,l.b,"start"),p&&(a(),u=Me(t,o,l.b,l.duration,0,_,i.css))),l){if(z>=l.end)g(o=l.b,1-o),K(t,l.b,"end"),r||(l.b?a():--l.group.r||D(l.group.c)),l=null;else if(z>=l.start){const F=z-l.start;o=l.a+l.d*_(F/l.duration),g(o,1-o)}}return!!(l||r)}))}return{run(c){pe(i)?He().then(()=>{i=i(),d(c)}):d(c)},end(){a(),l=r=null}}}const sn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function de(t){t&&t.c()}function ee(t,e,n,s){const{fragment:i,on_mount:o,on_destroy:l,after_update:r}=t.$$;i&&i.m(e,n),s||W(()=>{const u=o.map(ut).filter(pe);l?l.push(...u):D(u),t.$$.on_mount=[]}),r.forEach(W)}function te(t,e){const n=t.$$;n.fragment!==null&&(D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rn(t,e){t.$$.dirty[0]===-1&&(ue.push(t),xt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function se(t,e,n,s,i,o,l,r=[-1]){const u=he;ce(t);const a=t.$$={fragment:null,ctx:null,props:o,update:I,not_equal:i,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:We(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};l&&l(a.root);let h=!1;if(a.ctx=n?n(t,e.props||{},(d,c,...f)=>{const m=f.length?f[0]:c;return a.ctx&&i(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),h&&rn(t,d)),c}):[],a.update(),h=!0,D(a.before_update),a.fragment=s?s(a.ctx):!1,e.target){if(e.hydrate){const d=Nt(e.target);a.fragment&&a.fragment.l(d),d.forEach(w)}else a.fragment&&a.fragment.c();e.intro&&R(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),mt()}ce(u)}class ie{$destroy(){te(this,1),this.$destroy=I}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Lt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const on=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function ln(){const t=ne();return e=>{const n=on.map(s=>L(e,s,i=>Vt(t,i)));return{destroy:()=>n.forEach(s=>s())}}}class un{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:n}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:n,context:s,width:i,height:o}){const l={context:s,width:i,height:o};if(this.needsResize&&(s.setTransform(n,0,0,n,0,0),this.needsResize=!1),this.needsSetup){for(const[r,u]of this.setups)u(l),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e&&s.clearRect(0,0,i,o);for(const r of this.layerSequence)this.renderers.get(r)(l);this.needsRedraw=!1}}}function an(t){let e,n,s,i,o,l,r,u,a;const h=t[13].default,d=Le(h,t,t[12],null);return{c(){e=M("canvas"),o=E(),l=M("div"),d&&d.c(),y(e,"style",n="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")),y(e,"width",s=t[1]*t[0]),y(e,"height",i=t[2]*t[0]),Bt(l,"display","none")},m(c,f){k(c,e,f),t[14](e),k(c,o,f),k(c,l,f),d&&d.m(l,null),t[15](l),r=!0,u||(a=qt(t[6].call(null,e)),u=!0)},p(c,[f]){(!r||f&14&&n!==(n="display: block; width: "+c[1]+"px; height: "+c[2]+"px;"+(c[3]?` ${c[3]}`:"")))&&y(e,"style",n),(!r||f&3&&s!==(s=c[1]*c[0]))&&y(e,"width",s),(!r||f&5&&i!==(i=c[2]*c[0]))&&y(e,"height",i),d&&d.p&&(!r||f&4096)&&qe(d,h,c,c[12],r?Ie(h,c[12],f,null):Oe(c[12]),null)},i(c){r||(R(d,c),r=!0)},o(c){A(d,c),r=!1},d(c){c&&w(e),t[14](null),c&&w(o),c&&w(l),d&&d.d(c),t[15](null),u=!1,a()}}}const _t={};function cn(t,e,n){let{$$slots:s={},$$scope:i}=e,{width:o=640,height:l=640,pixelRatio:r=void 0,style:u=null,autoclear:a=!0}=e,h,d,c,f,m;const _=ln(),g=new un;function p(){g.redraw()}function $(){return h}function z(){return d}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function F(){g.render({context:d,width:o,height:l,pixelRatio:r,autoclear:a}),c=window.requestAnimationFrame(F)}Ut(_t,{register:g.register,unregister:g.unregister,redraw:g.redraw}),Jt(()=>{d=h.getContext("2d"),m=new MutationObserver(C),m.observe(f,{childList:!0}),C(),F();function C(){const _e=[...f.children].map(P=>+P.dataset.layerId);n(11,g.layerSequence=_e,g),g.redraw()}}),pt(()=>{typeof window>"u"||(window.cancelAnimationFrame(c),m.disconnect())});function Y(C){G[C?"unshift":"push"](()=>{h=C,n(4,h)})}function X(C){G[C?"unshift":"push"](()=>{f=C,n(5,f)})}return t.$$set=C=>{"width"in C&&n(1,o=C.width),"height"in C&&n(2,l=C.height),"pixelRatio"in C&&n(0,r=C.pixelRatio),"style"in C&&n(3,u=C.style),"autoclear"in C&&n(7,a=C.autoclear),"$$scope"in C&&n(12,i=C.$$scope)},t.$$.update=()=>{t.$$.dirty&2183&&g.resize()},[r,o,l,u,h,f,_,a,p,$,z,g,i,s,Y,X]}class fn extends ie{constructor(e){super(),se(this,e,cn,an,Q,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function hn(t){let e;return{c(){e=M("div"),y(e,"data-layer-id",t[0])},m(n,s){k(n,e,s)},p:I,i:I,o:I,d(n){n&&w(e)}}}function dn(t,e,n){const{register:s,unregister:i,redraw:o}=Qt(_t);let{setup:l=void 0,render:r=()=>{}}=e;if(typeof l!="function"&&l!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const u=s({setup:l,render:r});return pt(()=>i(u)),t.$$set=a=>{"setup"in a&&n(1,l=a.setup),"render"in a&&n(2,r=a.render)},t.$$.update=()=>{t.$$.dirty&4&&o()},[u,l,r]}class pn extends ie{constructor(e){super(),se(this,e,dn,hn,Q,{setup:1,render:2})}}const Z=[];function mn(t,e){return{subscribe:me(t,e).subscribe}}function me(t,e=I){let n;const s=new Set;function i(r){if(Q(t,r)&&(t=r,n)){const u=!Z.length;for(const a of s)a[1](),Z.push(a,t);if(u){for(let a=0;a<Z.length;a+=2)Z[a][0](Z[a+1]);Z.length=0}}}function o(r){i(r(t))}function l(r,u=I){const a=[r,u];return s.add(a),s.size===1&&(n=e(i)||I),r(t),()=>{s.delete(a),s.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}let Qe;const gt=Date.now();function bt(t){return t(Date.now()-gt),Qe=window.requestAnimationFrame(()=>bt(t)),()=>window.cancelAnimationFrame(Qe)}function _n(){}mn(Date.now()-gt,typeof window>"u"?_n:bt);const gn="/jigsaw-svelte/assets/puzzle.7b2c6e4e.wav";class bn{constructor(e,n,s,i,o,l){this.width=o,this.height=l,this.i=e,this.j=n,this.correctPos={x:s.x,y:s.y},this.currentPos={x:i.x,y:i.y},this.path=null,this.borderpath=null,this.shape={},this.solved=!1}draw(e,n,s,i,o=i){const l=Math.min(this.width,this.height),r=.08*l,u=.2*l,a=.2*l;let h=this.currentPos.x+s;this.path=new Path2D,this.path.moveTo(h,this.currentPos.y),this.shape.top&&(this.path.lineTo(h+this.width*Math.abs(this.shape.top)-r,this.currentPos.y),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.top)-r,this.currentPos.y-a*Math.sign(this.shape.top)*.2,h+this.width*Math.abs(this.shape.top)-u,this.currentPos.y-a*Math.sign(this.shape.top),h+this.width*Math.abs(this.shape.top),this.currentPos.y-a*Math.sign(this.shape.top)),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.top)+u,this.currentPos.y-a*Math.sign(this.shape.top),h+this.width*Math.abs(this.shape.top)+r,this.currentPos.y-a*Math.sign(this.shape.top)*.2,h+this.width*Math.abs(this.shape.top)+r,this.currentPos.y)),this.path.lineTo(h+this.width,this.currentPos.y),this.shape.right&&(this.path.lineTo(h+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)-r),this.path.bezierCurveTo(h+this.width-a*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)-r,h+this.width-a*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)-u,h+this.width-a*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)),this.path.bezierCurveTo(h+this.width-a*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)+u,h+this.width-a*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)+r,h+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)+r)),this.path.lineTo(h+this.width,this.currentPos.y+this.height),this.shape.bottom&&(this.path.lineTo(h+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom)*.2,h+this.width*Math.abs(this.shape.bottom)+u,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom),h+this.width*Math.abs(this.shape.bottom),this.currentPos.y+this.height+a*Math.sign(this.shape.bottom)),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.bottom)-u,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom),h+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom)*.2,h+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height)),this.path.lineTo(h,this.currentPos.y+this.height),this.shape.left&&(this.path.lineTo(h,this.currentPos.y+this.height*Math.abs(this.shape.left)+r),this.path.bezierCurveTo(h+a*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)+r,h+a*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)+u,h+a*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)),this.path.bezierCurveTo(h+a*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)-u,h+a*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)-r,h,this.currentPos.y+this.height*Math.abs(this.shape.left)-r)),this.path.lineTo(h,this.currentPos.y),e.save(),e.clip(this.path);let d=n.naturalWidth/o,c=n.naturalHeight/i,f=Math.min(d,c)*a/l;e.drawImage(n,this.i*d-f,this.j*c-f,d+f*2,c+f*2,h-a,this.currentPos.y-a,this.width+a*2,this.height+a*2),e.restore(),e.stroke(this.path)}}const J=me(0),ae=me(0),Ve=me(null),Re=me(!1),{window:je}=sn;function yn(t){let e,n;return e=new pn({props:{render:t[4],setup:t[10]}}),{c(){de(e.$$.fragment)},m(s,i){ee(e,s,i),n=!0},p(s,i){const o={};i[0]&16&&(o.render=s[4]),e.$set(o)},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function wn(t){let e,n,s,i,o,l,r,u;W(t[15]);let a={width:t[0],height:t[5],style:"margin: 0 auto; touch-action: none;border: 1px solid black; cursor: "+t[1]+";",$$slots:{default:[yn]},$$scope:{ctx:t}};return e=new fn({props:a}),t[16](e),e.$on("mousedown",t[17]),e.$on("mousemove",t[18]),e.$on("mouseup",t[19]),e.$on("touchstart",t[20]),e.$on("touchmove",t[21]),e.$on("touchend",t[22]),{c(){de(e.$$.fragment),n=E(),s=M("audio"),i=M("track"),y(i,"kind","captions"),fe(s.src,o=gn)||y(s,"src",o),y(s,"preload","auto"),s.controls=!0},m(h,d){ee(e,h,d),k(h,n,d),k(h,s,d),v(s,i),t[23](s),l=!0,r||(u=[L(je,"resize",t[9]),L(je,"resize",t[15])],r=!0)},p(h,d){const c={};d[0]&1&&(c.width=h[0]),d[0]&2&&(c.style="margin: 0 auto; touch-action: none;border: 1px solid black; cursor: "+h[1]+";"),d[0]&16|d[1]&512&&(c.$$scope={dirty:d,ctx:h}),e.$set(c)},i(h){l||(R(e.$$.fragment,h),l=!0)},o(h){A(e.$$.fragment,h),l=!1},d(h){t[16](null),te(e,h),h&&w(n),h&&w(s),t[23](null),r=!1,D(u)}}}const vn=.7;function kn(t,e,n){let s,{img:i}=e,o;J.subscribe(b=>{o=b});let l;ae.subscribe(b=>{n(12,l=b)}),window.devicePixelRatio=1;const r=o,u=o;let a=window.innerWidth;const h=window.innerHeight,d=vn*Math.min(a/i.naturalWidth,h/i.naturalHeight),c=d*i.naturalWidth,f=d*i.naturalHeight;let m=a/2-c/2,_=[],g,p,$=0,z="default";function F(b,q,j){for(let T=0;T<b.length;T++)b[T].currentPos.x=Math.floor(Math.random()*q)-m,b[T].currentPos.y=Math.floor(Math.random()*j)}let Y;function X(b,q,j=null){let T=Y.getContext();for(let O=_.length-1;O>=0;O--)if(T.isPointInPath(_[O].path,b,q)){p=_[O];break}if(p){j&&j.preventDefault(),n(1,z="grab"),g={x:b-p.currentPos.x,y:q-p.currentPos.y};let O=_.splice(_.findIndex(H=>H.j==p.j&&H.i==p.i),1);_.push(O[0]),n(14,_)}}function C(b,q,j=null){g&&(j&&j.preventDefault(),p.currentPos.x=b-g.x,p.currentPos.y=q-g.y,n(14,_))}function _e(){$===_.length&&Re.update(q=>!0)}let P;function V(){let b=null;if(p){n(1,z="default");let q=30;const j=_.findIndex(T=>T.j==p.j&&T.i==p.i);if(Math.abs(p.currentPos.x-p.correctPos.x)<q&&Math.abs(p.currentPos.y-p.correctPos.y)<q){P.play(),b=setTimeout(()=>{P.pause(),n(3,P.currentTime=0,P)},500),p.currentPos.x=p.correctPos.x,p.currentPos.y=p.correctPos.y;let T=_.splice(j,1);p.solved||(T[0].solved=!0,$=$+1),b&&clearTimeout(b),_.unshift(T[0]),n(14,_)}else p.solved&&(n(14,_[j].solved=!1,_),$=$-1);g=null,p=null}_e()}function wt(){n(13,m=a/2-c/2),Y.redraw()}let Be;function vt(){clearTimeout(Be),Be=setTimeout(wt,100)}const kt=({context:b,width:q,height:j})=>{for(let O=0;O<u;O++)for(let H=0;H<r;H++){let re=O*c/u,oe=j/2-f/2+H*f/r,N=new bn(O,H,{x:re,y:oe},{x:re,y:oe},c/u,f/r);_.push(N)}let T=0;for(let O=0;O<u;O++)for(let H=0;H<r;H++){let re=H,oe=O,N=_[T];if(re==r-1)N.shape.bottom=null;else{let $e=Math.random()-.5<0?-1:1;N.shape.bottom=$e*(Math.random()*.4+.3)}if(oe==u-1)N.shape.right=null;else{let $e=Math.random()-.5<0?-1:1;N.shape.right=$e*(Math.random()*.4+.3)}re==0?N.shape.top=null:N.shape.top=-_[T-1].shape.bottom,oe==0?N.shape.left=null:N.shape.left=-_[T-r].shape.right,T++}F(_,q-c/u,j-f/r)};function Mt(){n(0,a=je.innerWidth)}function Pt(b){G[b?"unshift":"push"](()=>{Y=b,n(2,Y)})}const zt=b=>{X(b.offsetX,b.offsetY)},$t=b=>{C(b.offsetX,b.offsetY)},Ct=()=>{V()},Tt=b=>X(b.touches[0].clientX,b.touches[0].clientY,b),Et=b=>{C(b.touches[0].clientX,b.touches[0].clientY,b)},St=()=>{V()};function Rt(b){G[b?"unshift":"push"](()=>{P=b,n(3,P)})}return t.$$set=b=>{"img"in b&&n(11,i=b.img)},t.$$.update=()=>{t.$$.dirty[0]&30720&&n(4,s=({context:b,width:q,height:j})=>{b.globalAlpha=l,b.drawImage(i,q/2-c/2,j/2-f/2,c,f),b.globalAlpha=1,l==0&&(b.beginPath(),b.rect(q/2-c/2,j/2-f/2,c,f),b.stroke());for(let T=0;T<_.length;T++)_[T].draw(b,i,m,r)})},[a,z,Y,P,s,h,X,C,V,vt,kt,i,l,m,_,Mt,Pt,zt,$t,Ct,Tt,Et,St,Rt]}class Mn extends ie{constructor(e){super(),se(this,e,kn,wn,Q,{img:11},null,[-1,-1])}}function yt(t){const e=t-1;return e*e*e+1}function Pn(t,{delay:e=0,duration:n=400,easing:s=ze}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:o=>`opacity: ${o*i}`}}function Ze(t,{delay:e=0,duration:n=400,easing:s=yt}={}){const i=getComputedStyle(t),o=+i.opacity,l=parseFloat(i.height),r=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),a=parseFloat(i.marginTop),h=parseFloat(i.marginBottom),d=parseFloat(i.borderTopWidth),c=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:s,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*o};height: ${f*l}px;padding-top: ${f*r}px;padding-bottom: ${f*u}px;margin-top: ${f*a}px;margin-bottom: ${f*h}px;border-top-width: ${f*d}px;border-bottom-width: ${f*c}px;`}}function zn(t,{delay:e=0,duration:n=400,easing:s=yt,start:i=0,opacity:o=0}={}){const l=getComputedStyle(t),r=+l.opacity,u=l.transform==="none"?"":l.transform,a=1-i,h=r*(1-o);return{delay:e,duration:n,easing:s,css:(d,c)=>`
			transform: ${u} scale(${1-a*c});
			opacity: ${r-h*c}
		`}}function $n(t){let e,n,s,i,o,l,r,u,a;const h=t[2].default,d=Le(h,t,t[1],null);return{c(){e=M("div"),n=M("span"),n.textContent="\u2715",s=E(),i=M("div"),d&&d.c(),y(n,"class","svelte-5gidyv"),y(i,"class","modal-content svelte-5gidyv"),y(e,"class","modal svelte-5gidyv")},m(c,f){k(c,e,f),v(e,n),v(e,s),v(e,i),d&&d.m(i,null),r=!0,u||(a=L(n,"click",t[0]),u=!0)},p(c,[f]){d&&d.p&&(!r||f&2)&&qe(d,h,c,c[1],r?Ie(h,c[1],f,null):Oe(c[1]),null)},i(c){r||(R(d,c),W(()=>{l&&l.end(1),o=tn(e,zn,{}),o.start()}),r=!0)},o(c){A(d,c),o&&o.invalidate(),l=nn(e,Pn,{}),r=!1},d(c){c&&w(e),d&&d.d(c),c&&l&&l.end(),u=!1,a()}}}function Cn(t,e,n){let{$$slots:s={},$$scope:i}=e;const o=Kt(),l=()=>o("close");return t.$$set=r=>{"$$scope"in r&&n(1,i=r.$$scope)},[l,i,s]}class Tn extends ie{constructor(e){super(),se(this,e,Cn,$n,Q,{})}}function xe(t){let e,n,s,i,o;const l=t[4].default,r=Le(l,t,t[3],null);return{c(){e=M("div"),r&&r.c(),y(e,"class","menu-content svelte-r61iqn")},m(u,a){k(u,e,a),r&&r.m(e,null),s=!0,i||(o=[L(e,"outrostart",t[5]),L(e,"outroend",t[6])],i=!0)},p(u,a){r&&r.p&&(!s||a&8)&&qe(r,l,u,u[3],s?Ie(l,u[3],a,null):Oe(u[3]),null)},i(u){s||(R(r,u),W(()=>{n||(n=Ue(e,Ze,{},!0)),n.run(1)}),s=!0)},o(u){A(r,u),n||(n=Ue(e,Ze,{},!1)),n.run(0),s=!1},d(u){u&&w(e),r&&r.d(u),u&&n&&n.end(),i=!1,D(o)}}}function En(t){let e,n,s,i,o,l,r=t[0]&&xe(t);return{c(){e=M("section"),n=M("span"),n.textContent="\u2022\u2022\u2022",s=E(),r&&r.c(),y(e,"class","svelte-r61iqn"),Je(e,"outro",t[1])},m(u,a){k(u,e,a),v(e,n),v(e,s),r&&r.m(e,null),i=!0,o||(l=L(e,"click",t[2]),o=!0)},p(u,[a]){u[0]?r?(r.p(u,a),a&1&&R(r,1)):(r=xe(u),r.c(),R(r,1),r.m(e,null)):r&&(Ee(),A(r,1,1,()=>{r=null}),Se()),(!i||a&2)&&Je(e,"outro",u[1])},i(u){i||(R(r),i=!0)},o(u){A(r),i=!1},d(u){u&&w(e),r&&r.d(),o=!1,l()}}}function Sn(t,e,n){let{$$slots:s={},$$scope:i}=e,o=!1,l=!1;function r(){n(0,o=!o)}const u=()=>n(1,l=!0),a=()=>n(1,l=!1);return t.$$set=h=>{"$$scope"in h&&n(3,i=h.$$scope)},[o,l,r,i,s,u,a]}class Rn extends ie{constructor(e){super(),se(this,e,Sn,En,Q,{})}}const et=t=>{const e=l=>String(l).padStart(2,"0");let n=t%1e3;t=(t-n)/1e3;let s=t%60;t=(t-s)/60;let i=t%60,o=(t-i)/60;return`${e(o)}:${e(i)}:${e(s)}.${e(n)}`};function tt(t,e,n){const s=t.slice();return s[22]=e[n],s}function nt(t){let e,n,s,i,o,l,r,u,a,h,d,c,f;return{c(){e=M("h1"),e.textContent="Create your own jigsaw!",n=E(),s=M("form"),i=M("input"),o=E(),l=M("div"),r=M("button"),r.textContent="Select image",u=E(),a=M("p"),a.textContent="or",h=E(),d=M("button"),d.textContent="Solve random image",y(i,"type","file"),y(i,"id","img"),y(i,"name","img"),y(i,"accept","image/*"),y(s,"class","form-1"),y(r,"class","img-button"),y(l,"class","choose-or-random-buttons")},m(m,_){k(m,e,_),k(m,n,_),k(m,s,_),v(s,i),t[13](i),k(m,o,_),k(m,l,_),v(l,r),v(l,u),v(l,a),v(l,h),v(l,d),c||(f=[L(i,"change",t[14]),L(r,"click",Ht(t[15])),L(d,"click",t[16])],c=!0)},p:I,d(m){m&&w(e),m&&w(n),m&&w(s),t[13](null),m&&w(o),m&&w(l),c=!1,D(f)}}}function st(t){let e,n;return{c(){e=M("img"),fe(e.src,n=t[0])||y(e,"src",n),y(e,"alt","puzzle"),y(e,"width","700px"),y(e,"class","svelte-i7f4vy")},m(s,i){k(s,e,i),t[17](e)},p(s,i){i&1&&!fe(e.src,n=s[0])&&y(e,"src",n)},d(s){s&&w(e),t[17](null)}}}function it(t){let e,n,s,i,o,l,r,u,a,h,d,c=t[8],f=[];for(let p=0;p<c.length;p+=1)f[p]=rt(tt(t,c,p));function m(p,$){if(p[3]==="Easy")return In;if(p[3]==="Medium")return Ln;if(p[3]==="Hard")return jn}let _=m(t),g=_&&_(t);return{c(){e=M("select");for(let p=0;p<f.length;p+=1)f[p].c();n=E(),g&&g.c(),s=E(),i=M("div"),o=M("input"),l=E(),r=M("label"),r.innerHTML="<p>Background image</p>",u=E(),a=M("button"),a.textContent="New Game",t[3]===void 0&&W(()=>t[18].call(e)),y(o,"type","checkbox"),o.checked=!0,y(o,"id","switch"),y(o,"class","checkbox"),y(r,"for","switch"),y(r,"class","toggle"),y(i,"class","background-image-checkbox-wrapper")},m(p,$){k(p,e,$);for(let z=0;z<f.length;z+=1)f[z].m(e,null);Xe(e,t[3]),k(p,n,$),g&&g.m(p,$),k(p,s,$),k(p,i,$),v(i,o),v(i,l),v(i,r),k(p,u,$),k(p,a,$),h||(d=[L(e,"change",t[18]),L(e,"click",t[11]),L(o,"click",t[12]),L(a,"click",t[19])],h=!0)},p(p,$){if($&256){c=p[8];let z;for(z=0;z<c.length;z+=1){const F=tt(p,c,z);f[z]?f[z].p(F,$):(f[z]=rt(F),f[z].c(),f[z].m(e,null))}for(;z<f.length;z+=1)f[z].d(1);f.length=c.length}$&264&&Xe(e,p[3]),_===(_=m(p))&&g?g.p(p,$):(g&&g.d(1),g=_&&_(p),g&&(g.c(),g.m(s.parentNode,s)))},d(p){p&&w(e),Dt(f,p),p&&w(n),g&&g.d(p),p&&w(s),p&&w(i),p&&w(u),p&&w(a),h=!1,D(d)}}}function rt(t){let e,n=t[22]+"",s;return{c(){e=M("option"),s=S(n),e.__value=t[22],e.value=e.__value},m(i,o){k(i,e,o),v(e,s)},p:I,d(i){i&&w(e)}}}function jn(t){let e,n,s,i,o,l;return{c(){e=M("p"),n=S("Selected Hard ("),s=S(t[4]),i=S(" x "),o=S(t[4]),l=S(")")},m(r,u){k(r,e,u),v(e,n),v(e,s),v(e,i),v(e,o),v(e,l)},p(r,u){u&16&&U(s,r[4]),u&16&&U(o,r[4])},d(r){r&&w(e)}}}function Ln(t){let e,n,s,i,o,l;return{c(){e=M("p"),n=S("Selected Medium ("),s=S(t[4]),i=S(" x "),o=S(t[4]),l=S(")")},m(r,u){k(r,e,u),v(e,n),v(e,s),v(e,i),v(e,o),v(e,l)},p(r,u){u&16&&U(s,r[4]),u&16&&U(o,r[4])},d(r){r&&w(e)}}}function In(t){let e,n,s,i,o,l;return{c(){e=M("p"),n=S("Selected Easy ("),s=S(t[4]),i=S(" x "),o=S(t[4]),l=S(")")},m(r,u){k(r,e,u),v(e,n),v(e,s),v(e,i),v(e,o),v(e,l)},p(r,u){u&16&&U(s,r[4]),u&16&&U(o,r[4])},d(r){r&&w(e)}}}function ot(t){let e,n,s,i;return e=new Mn({props:{img:t[2]}}),s=new Rn({props:{$$slots:{default:[qn]},$$scope:{ctx:t}}}),{c(){de(e.$$.fragment),n=E(),de(s.$$.fragment)},m(o,l){ee(e,o,l),k(o,n,l),ee(s,o,l),i=!0},p(o,l){const r={};l&4&&(r.img=o[2]),e.$set(r);const u={};l&33554435&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){i||(R(e.$$.fragment,o),R(s.$$.fragment,o),i=!0)},o(o){A(e.$$.fragment,o),A(s.$$.fragment,o),i=!1},d(o){te(e,o),o&&w(n),te(s,o)}}}function qn(t){let e,n,s,i,o,l,r,u,a,h,d;return{c(){e=M("img"),s=E(),i=M("div"),o=M("input"),l=E(),r=M("label"),r.innerHTML="<p>Background image</p>",u=E(),a=M("button"),a.textContent="New Game",fe(e.src,n=t[0])||y(e,"src",n),y(e,"alt","solved jigsaw"),y(e,"class","svelte-i7f4vy"),y(o,"type","checkbox"),o.checked=!0,y(o,"id","switch"),y(o,"class","checkbox"),y(r,"for","switch"),y(r,"class","toggle"),y(i,"class","background-image-checkbox-wrapper")},m(c,f){k(c,e,f),k(c,s,f),k(c,i,f),v(i,o),v(i,l),v(i,r),k(c,u,f),k(c,a,f),h||(d=[L(o,"click",t[12]),L(a,"click",t[20])],h=!0)},p(c,f){f&1&&!fe(e.src,n=c[0])&&y(e,"src",n)},d(c){c&&w(e),c&&w(s),c&&w(i),c&&w(u),c&&w(a),h=!1,D(d)}}}function lt(t){let e,n;return e=new Tn({props:{$$slots:{default:[On]},$$scope:{ctx:t}}}),e.$on("close",t[9]),{c(){de(e.$$.fragment)},m(s,i){ee(e,s,i),n=!0},p(s,i){const o={};i&33554496&&(o.$$scope={dirty:i,ctx:s}),e.$set(o)},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){A(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function On(t){let e,n,s,i,o=et(new Date-t[6])+"",l;return{c(){e=M("h2"),e.textContent="Puzzle solved!",n=E(),s=M("p"),i=S("Your time: "),l=S(o),y(s,"class","modal-text svelte-i7f4vy")},m(r,u){k(r,e,u),k(r,n,u),k(r,s,u),v(s,i),v(s,l)},p(r,u){u&64&&o!==(o=et(new Date-r[6])+"")&&U(l,o)},d(r){r&&w(e),r&&w(n),r&&w(s)}}}function An(t){let e,n,s,i,o,l,r,u=!t[1]&&nt(t),a=t[0]&&st(t),h=!t[1]&&it(t),d=t[1]&&ot(t),c=t[7]&&lt(t);return{c(){e=M("main"),u&&u.c(),n=E(),a&&a.c(),s=E(),h&&h.c(),i=E(),d&&d.c(),o=E(),c&&c.c(),l=Ft(),y(e,"class","container")},m(f,m){k(f,e,m),u&&u.m(e,null),v(e,n),a&&a.m(e,null),v(e,s),h&&h.m(e,null),k(f,i,m),d&&d.m(f,m),k(f,o,m),c&&c.m(f,m),k(f,l,m),r=!0},p(f,[m]){f[1]?u&&(u.d(1),u=null):u?u.p(f,m):(u=nt(f),u.c(),u.m(e,n)),f[0]?a?a.p(f,m):(a=st(f),a.c(),a.m(e,s)):a&&(a.d(1),a=null),f[1]?h&&(h.d(1),h=null):h?h.p(f,m):(h=it(f),h.c(),h.m(e,null)),f[1]?d?(d.p(f,m),m&2&&R(d,1)):(d=ot(f),d.c(),R(d,1),d.m(o.parentNode,o)):d&&(Ee(),A(d,1,1,()=>{d=null}),Se()),f[7]?c?(c.p(f,m),m&128&&R(c,1)):(c=lt(f),c.c(),R(c,1),c.m(l.parentNode,l)):c&&(Ee(),A(c,1,1,()=>{c=null}),Se())},i(f){r||(R(d),R(c),r=!0)},o(f){A(d),A(c),r=!1},d(f){f&&w(e),u&&u.d(),a&&a.d(),h&&h.d(),f&&w(i),d&&d.d(f),f&&w(o),c&&c.d(f),f&&w(l)}}}function Dn(t,e,n){let s,i;Ye(t,Ve,P=>n(6,s=P)),Ye(t,Re,P=>n(7,i=P));let o,l=!1,r;const u=["Easy","Medium","Hard","debug"];let a=u[0];J.update(P=>5);let h;J.subscribe(P=>{n(4,h=P)}),ae.update(P=>.4);let d;ae.subscribe(P=>{d=P});function c(){n(1,l=!1),Ge(Re,i=!1,i),n(0,o=""),n(2,r.style.display="block",r)}function f(){o&&(n(1,l=!0),n(2,r.style.display="none",r),Ge(Ve,s=new Date,s))}function m(){a==="Easy"?J.update(P=>5):a==="Medium"?J.update(P=>7):a==="Hard"?J.update(P=>10):a==="debug"&&J.update(P=>2)}function _(){d>0?ae.update(P=>0):ae.update(P=>.4)}let g;function p(P){G[P?"unshift":"push"](()=>{g=P,n(5,g)})}const $=P=>{let V=P.target.form[0].files[0];V&&n(0,o=URL.createObjectURL(V))},z=()=>{g.click()},F=()=>n(0,o="https://picsum.photos/500?random="+Math.floor(Math.random()*1e3));function Y(P){G[P?"unshift":"push"](()=>{r=P,n(2,r)})}function X(){a=Wt(this),n(3,a),n(8,u)}return[o,l,r,a,h,g,s,i,u,c,f,m,_,p,$,z,F,Y,X,()=>{l?c():f()},()=>{l?c():f()}]}class Fn extends ie{constructor(e){super(),se(this,e,Dn,An,Q,{})}}new Fn({target:document.getElementById("app")});
