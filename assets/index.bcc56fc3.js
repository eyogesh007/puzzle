(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();function O(){}function ct(t,e){for(const s in e)t[s]=e[s];return t}function Ne(t){return t()}function ve(){return Object.create(null)}function F(t){t.forEach(Ne)}function We(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ae;function _e(t,e){return ae||(ae=document.createElement("a")),ae.href=e,t===ae.href}function ft(t){return Object.keys(t).length===0}function dt(t,...e){if(t==null)return O;const s=t.subscribe(...e);return s.unsubscribe?()=>s.unsubscribe():s}function Pe(t,e,s){t.$$.on_destroy.push(dt(e,s))}function Ye(t,e,s,n){if(t){const i=Be(t,e,s,n);return t[0](i)}}function Be(t,e,s,n){return t[1]&&n?ct(s.ctx.slice(),t[1](n(e))):s.ctx}function Fe(t,e,s,n){if(t[2]&&n){const i=t[2](n(s));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],h=Math.max(e.dirty.length,i.length);for(let r=0;r<h;r+=1)l[r]=e.dirty[r]|i[r];return l}return e.dirty|i}return e.dirty}function Xe(t,e,s,n,i,l){if(i){const h=Be(e,s,n,l);t.p(h,i)}}function $e(t){if(t.ctx.length>32){const e=[],s=t.ctx.length/32;for(let n=0;n<s;n++)e[n]=-1;return e}return-1}function ke(t,e,s){return t.set(s),e}function pt(t){return t&&We(t.destroy)?t.destroy:O}function w(t,e){t.appendChild(e)}function C(t,e,s){t.insertBefore(e,s||null)}function k(t){t.parentNode.removeChild(t)}function mt(t,e){for(let s=0;s<t.length;s+=1)t[s]&&t[s].d(e)}function M(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function j(){return R(" ")}function Ge(){return R("")}function N(t,e,s,n){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s,n)}function gt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,s){s==null?t.removeAttribute(e):t.getAttribute(e)!==s&&t.setAttribute(e,s)}function _t(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function bt(t,e,s,n){s===null?t.style.removeProperty(e):t.style.setProperty(e,s,n?"important":"")}function ze(t,e){for(let s=0;s<t.options.length;s+=1){const n=t.options[s];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function wt(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function yt(t,e,{bubbles:s=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,s,n,e),i}let ne;function se(t){ne=t}function V(){if(!ne)throw new Error("Function called outside component initialization");return ne}function Mt(t){V().$$.on_mount.push(t)}function Je(t){V().$$.on_destroy.push(t)}function vt(){const t=V();return(e,s,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=yt(e,s,{cancelable:n});return i.slice().forEach(h=>{h.call(t,l)}),!l.defaultPrevented}return!0}}function Pt(t,e){return V().$$.context.set(t,e),e}function kt(t){return V().$$.context.get(t)}function zt(t,e){const s=t.$$.callbacks[e.type];s&&s.slice().forEach(n=>n.call(this,e))}const ee=[],$=[],fe=[],Ce=[],Ct=Promise.resolve();let be=!1;function Tt(){be||(be=!0,Ct.then(Ke))}function ie(t){fe.push(t)}const ge=new Set;let ce=0;function Ke(){const t=ne;do{for(;ce<ee.length;){const e=ee[ce];ce++,se(e),Et(e.$$)}for(se(null),ee.length=0,ce=0;$.length;)$.pop()();for(let e=0;e<fe.length;e+=1){const s=fe[e];ge.has(s)||(ge.add(s),s())}fe.length=0}while(ee.length);for(;Ce.length;)Ce.pop()();be=!1,ge.clear(),se(t)}function Et(t){if(t.fragment!==null){t.update(),F(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ie)}}const de=new Set;let G;function Te(){G={r:0,c:[],p:G}}function Ee(){G.r||F(G.c),G=G.p}function A(t,e){t&&t.i&&(de.delete(t),t.i(e))}function B(t,e,s,n){if(t&&t.o){if(de.has(t))return;de.add(t),G.c.push(()=>{de.delete(t),n&&(s&&t.d(1),n())}),t.o(e)}else n&&n()}const St=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function pe(t){t&&t.c()}function re(t,e,s,n){const{fragment:i,on_mount:l,on_destroy:h,after_update:r}=t.$$;i&&i.m(e,s),n||ie(()=>{const c=l.map(Ne).filter(We);h?h.push(...c):F(c),t.$$.on_mount=[]}),r.forEach(ie)}function oe(t,e){const s=t.$$;s.fragment!==null&&(F(s.on_destroy),s.fragment&&s.fragment.d(e),s.on_destroy=s.fragment=null,s.ctx=[])}function Rt(t,e){t.$$.dirty[0]===-1&&(ee.push(t),Tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,s,n,i,l,h,r=[-1]){const c=ne;se(t);const u=t.$$={fragment:null,ctx:null,props:l,update:O,not_equal:i,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ve(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};h&&h(u.root);let o=!1;if(u.ctx=s?s(t,e.props||{},(a,f,...p)=>{const b=p.length?p[0]:f;return u.ctx&&i(u.ctx[a],u.ctx[a]=b)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](b),o&&Rt(t,a)),f}):[],u.update(),o=!0,F(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const a=_t(e.target);u.fragment&&u.fragment.l(a),a.forEach(k)}else u.fragment&&u.fragment.c();e.intro&&A(t.$$.fragment),re(t,e.target,e.anchor,e.customElement),Ke()}se(c)}class ue{$destroy(){oe(this,1),this.$destroy=O}$on(e,s){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(s),()=>{const i=n.indexOf(s);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!ft(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function It(){const t=V();return e=>{const s=jt.map(n=>N(e,n,i=>zt(t,i)));return{destroy:()=>s.forEach(n=>n())}}}class Lt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:s}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:s,context:n,width:i,height:l}){const h={context:n,width:i,height:l};if(this.needsResize&&(n.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[r,c]of this.setups)c(h),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e&&n.clearRect(0,0,i,l);for(const r of this.layerSequence)this.renderers.get(r)(h);this.needsRedraw=!1}}}function qt(t){let e,s,n,i,l,h,r,c,u;const o=t[13].default,a=Ye(o,t,t[12],null);return{c(){e=M("canvas"),l=j(),h=M("div"),a&&a.c(),y(e,"style",s="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")),y(e,"width",n=t[1]*t[0]),y(e,"height",i=t[2]*t[0]),bt(h,"display","none")},m(f,p){C(f,e,p),t[14](e),C(f,l,p),C(f,h,p),a&&a.m(h,null),t[15](h),r=!0,c||(u=pt(t[6].call(null,e)),c=!0)},p(f,[p]){(!r||p&14&&s!==(s="display: block; width: "+f[1]+"px; height: "+f[2]+"px;"+(f[3]?` ${f[3]}`:"")))&&y(e,"style",s),(!r||p&3&&n!==(n=f[1]*f[0]))&&y(e,"width",n),(!r||p&5&&i!==(i=f[2]*f[0]))&&y(e,"height",i),a&&a.p&&(!r||p&4096)&&Xe(a,o,f,f[12],r?Fe(o,f[12],p,null):$e(f[12]),null)},i(f){r||(A(a,f),r=!0)},o(f){B(a,f),r=!1},d(f){f&&k(e),t[14](null),f&&k(l),f&&k(h),a&&a.d(f),t[15](null),c=!1,u()}}}const Ue={};function At(t,e,s){let{$$slots:n={},$$scope:i}=e,{width:l=640,height:h=640,pixelRatio:r=void 0,style:c=null,autoclear:u=!0}=e,o,a,f,p,b;const I=It(),g=new Lt;function q(){g.redraw()}function W(){return o}function S(){return a}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function z(){g.render({context:a,width:l,height:h,pixelRatio:r,autoclear:u}),f=window.requestAnimationFrame(z)}Pt(Ue,{register:g.register,unregister:g.unregister,redraw:g.redraw}),Mt(()=>{a=o.getContext("2d"),b=new MutationObserver(_),b.observe(p,{childList:!0}),_(),z();function _(){const d=[...p.children].map(T=>+T.dataset.layerId);s(11,g.layerSequence=d,g),g.redraw()}}),Je(()=>{typeof window>"u"||(window.cancelAnimationFrame(f),b.disconnect())});function E(_){$[_?"unshift":"push"](()=>{o=_,s(4,o)})}function v(_){$[_?"unshift":"push"](()=>{p=_,s(5,p)})}return t.$$set=_=>{"width"in _&&s(1,l=_.width),"height"in _&&s(2,h=_.height),"pixelRatio"in _&&s(0,r=_.pixelRatio),"style"in _&&s(3,c=_.style),"autoclear"in _&&s(7,u=_.autoclear),"$$scope"in _&&s(12,i=_.$$scope)},t.$$.update=()=>{t.$$.dirty&2183&&g.resize()},[r,l,h,c,o,p,I,u,q,W,S,g,i,n,E,v]}class Ht extends ue{constructor(e){super(),le(this,e,At,qt,Q,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Ot(t){let e;return{c(){e=M("div"),y(e,"data-layer-id",t[0])},m(s,n){C(s,e,n)},p:O,i:O,o:O,d(s){s&&k(e)}}}function Dt(t,e,s){const{register:n,unregister:i,redraw:l}=kt(Ue);let{setup:h=void 0,render:r=()=>{}}=e;if(typeof h!="function"&&h!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const c=n({setup:h,render:r});return Je(()=>i(c)),t.$$set=u=>{"setup"in u&&s(1,h=u.setup),"render"in u&&s(2,r=u.render)},t.$$.update=()=>{t.$$.dirty&4&&l()},[c,h,r]}class Nt extends ue{constructor(e){super(),le(this,e,Dt,Ot,Q,{setup:1,render:2})}}const K=[];function Wt(t,e){return{subscribe:he(t,e).subscribe}}function he(t,e=O){let s;const n=new Set;function i(r){if(Q(t,r)&&(t=r,s)){const c=!K.length;for(const u of n)u[1](),K.push(u,t);if(c){for(let u=0;u<K.length;u+=2)K[u][0](K[u+1]);K.length=0}}}function l(r){i(r(t))}function h(r,c=O){const u=[r,c];return n.add(u),n.size===1&&(s=e(i)||O),r(t),()=>{n.delete(u),n.size===0&&(s(),s=null)}}return{set:i,update:l,subscribe:h}}let Se;const Qe=Date.now();function Ve(t){return t(Date.now()-Qe),Se=window.requestAnimationFrame(()=>Ve(t)),()=>window.cancelAnimationFrame(Se)}function Yt(){}Wt(Date.now()-Qe,typeof window>"u"?Yt:Ve);const Bt="/jigsaw-svelte/assets/puzzle.7b2c6e4e.wav";class Ft{constructor(e,s,n,i,l,h){this.width=l,this.height=h,this.i=e,this.j=s,this.correctPos={x:n.x,y:n.y},this.currentPos={x:i.x,y:i.y},this.path=null,this.borderpath=null,this.shape={},this.solved=!1}draw(e,s,n,i,l=i){const h=Math.min(this.width,this.height),r=.08*h,c=.2*h,u=.2*h;let o=this.currentPos.x+n;this.path=new Path2D,this.path.moveTo(o,this.currentPos.y),this.shape.top&&(this.path.lineTo(o+this.width*Math.abs(this.shape.top)-r,this.currentPos.y),this.path.bezierCurveTo(o+this.width*Math.abs(this.shape.top)-r,this.currentPos.y-u*Math.sign(this.shape.top)*.2,o+this.width*Math.abs(this.shape.top)-c,this.currentPos.y-u*Math.sign(this.shape.top),o+this.width*Math.abs(this.shape.top),this.currentPos.y-u*Math.sign(this.shape.top)),this.path.bezierCurveTo(o+this.width*Math.abs(this.shape.top)+c,this.currentPos.y-u*Math.sign(this.shape.top),o+this.width*Math.abs(this.shape.top)+r,this.currentPos.y-u*Math.sign(this.shape.top)*.2,o+this.width*Math.abs(this.shape.top)+r,this.currentPos.y)),this.path.lineTo(o+this.width,this.currentPos.y),this.shape.right&&(this.path.lineTo(o+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)-r),this.path.bezierCurveTo(o+this.width-u*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)-r,o+this.width-u*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)-c,o+this.width-u*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)),this.path.bezierCurveTo(o+this.width-u*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)+c,o+this.width-u*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)+r,o+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)+r)),this.path.lineTo(o+this.width,this.currentPos.y+this.height),this.shape.bottom&&(this.path.lineTo(o+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height),this.path.bezierCurveTo(o+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height+u*Math.sign(this.shape.bottom)*.2,o+this.width*Math.abs(this.shape.bottom)+c,this.currentPos.y+this.height+u*Math.sign(this.shape.bottom),o+this.width*Math.abs(this.shape.bottom),this.currentPos.y+this.height+u*Math.sign(this.shape.bottom)),this.path.bezierCurveTo(o+this.width*Math.abs(this.shape.bottom)-c,this.currentPos.y+this.height+u*Math.sign(this.shape.bottom),o+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height+u*Math.sign(this.shape.bottom)*.2,o+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height)),this.path.lineTo(o,this.currentPos.y+this.height),this.shape.left&&(this.path.lineTo(o,this.currentPos.y+this.height*Math.abs(this.shape.left)+r),this.path.bezierCurveTo(o+u*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)+r,o+u*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)+c,o+u*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)),this.path.bezierCurveTo(o+u*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)-c,o+u*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)-r,o,this.currentPos.y+this.height*Math.abs(this.shape.left)-r)),this.path.lineTo(o,this.currentPos.y),e.save(),e.clip(this.path);let a=s.naturalWidth/l,f=s.naturalHeight/i,p=Math.min(a,f)*u/h;e.drawImage(s,this.i*a-p,this.j*f-p,a+p*2,f+p*2,o-u,this.currentPos.y-u,this.width+u*2,this.height+u*2),e.restore(),e.stroke(this.path)}}const U=he(0),te=he(0),Re=he(null),we=he(!1),{window:ye}=St;function Xt(t){let e,s;return e=new Nt({props:{render:t[4],setup:t[9]}}),{c(){pe(e.$$.fragment)},m(n,i){re(e,n,i),s=!0},p(n,i){const l={};i[0]&16&&(l.render=n[4]),e.$set(l)},i(n){s||(A(e.$$.fragment,n),s=!0)},o(n){B(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function $t(t){let e,s,n,i,l,h,r,c;ie(t[14]);let u={width:t[0]-50,height:Ze,style:"margin: 0 auto; border: 1px solid black; cursor: "+t[1]+";",$$slots:{default:[Xt]},$$scope:{ctx:t}};return e=new Ht({props:u}),t[15](e),e.$on("mousedown",t[16]),e.$on("mousemove",t[17]),e.$on("mouseup",t[18]),e.$on("touchstart",t[19]),e.$on("touchmove",t[20]),e.$on("touchend",t[21]),{c(){pe(e.$$.fragment),s=j(),n=M("audio"),i=M("track"),y(i,"kind","captions"),_e(n.src,l=Bt)||y(n,"src",l),y(n,"preload","auto"),n.controls=!0},m(o,a){re(e,o,a),C(o,s,a),C(o,n,a),w(n,i),t[22](n),h=!0,r||(c=[N(ye,"resize",t[8]),N(ye,"resize",t[14])],r=!0)},p(o,a){const f={};a[0]&1&&(f.width=o[0]-50),a[0]&2&&(f.style="margin: 0 auto; border: 1px solid black; cursor: "+o[1]+";"),a[0]&16|a[1]&256&&(f.$$scope={dirty:a,ctx:o}),e.$set(f)},i(o){h||(A(e.$$.fragment,o),h=!0)},o(o){B(e.$$.fragment,o),h=!1},d(o){t[15](null),oe(e,o),o&&k(s),o&&k(n),t[22](null),r=!1,F(c)}}}const Gt=.7,Ze=1e3;function Jt(t,e,s){let n,{img:i}=e,l;U.subscribe(m=>{l=m});let h;te.subscribe(m=>{s(11,h=m)}),window.devicePixelRatio=1;const r=l,c=l;let u=window.innerWidth;const o=Gt*Math.min(u/i.naturalWidth,Ze/i.naturalHeight),a=o*i.naturalWidth,f=o*i.naturalHeight;let p=(u-50)/2-a/2,b=[],I,g,q=0,W="default";function S(m,L,H){for(let P=0;P<m.length;P++)m[P].currentPos.x=Math.floor(Math.random()*L)-p,m[P].currentPos.y=Math.floor(Math.random()*H)}let z;function E(m,L){let H=z.getContext();for(let P=b.length-1;P>=0;P--)if(H.isPointInPath(b[P].path,m,L)){g=b[P];break}if(g){s(1,W="grab"),I={x:m-g.currentPos.x,y:L-g.currentPos.y};let P=b.splice(b.findIndex(D=>D.j==g.j&&D.i==g.i),1);b.push(P[0]),s(13,b)}}function v(m,L){I&&(g.currentPos.x=m-I.x,g.currentPos.y=L-I.y,s(13,b))}function _(){q===b.length&&we.update(L=>!0)}let d;function T(){let m=null;if(g){s(1,W="default");let L=30;const H=b.findIndex(P=>P.j==g.j&&P.i==g.i);if(Math.abs(g.currentPos.x-g.correctPos.x)<L&&Math.abs(g.currentPos.y-g.correctPos.y)<L){d.play(),m=setTimeout(()=>{d.pause(),s(3,d.currentTime=0,d)},500),g.currentPos.x=g.correctPos.x,g.currentPos.y=g.correctPos.y;let P=b.splice(H,1);g.solved||(P[0].solved=!0,q=q+1),m&&clearTimeout(m),b.unshift(P[0]),s(13,b)}else g.solved&&(s(13,b[H].solved=!1,b),q=q-1);I=null,g=null}_()}function xe(){s(12,p=(u-50)/2-a/2),z.redraw()}let Me;function et(){clearTimeout(Me),Me=setTimeout(xe,100)}const tt=({context:m,width:L,height:H})=>{for(let D=0;D<c;D++)for(let X=0;X<r;X++){let Z=D*a/c,x=H/2-f/2+X*f/r,Y=new Ft(D,X,{x:Z,y:x},{x:Z,y:x},a/c,f/r);b.push(Y)}let P=0;for(let D=0;D<c;D++)for(let X=0;X<r;X++){let Z=X,x=D,Y=b[P];if(Z==r-1)Y.shape.bottom=null;else{let me=Math.random()-.5<0?-1:1;Y.shape.bottom=me*(Math.random()*.4+.3)}if(x==c-1)Y.shape.right=null;else{let me=Math.random()-.5<0?-1:1;Y.shape.right=me*(Math.random()*.4+.3)}Z==0?Y.shape.top=null:Y.shape.top=-b[P-1].shape.bottom,x==0?Y.shape.left=null:Y.shape.left=-b[P-r].shape.right,P++}S(b,L-a/c,H-f/r)};function st(){s(0,u=ye.innerWidth)}function nt(m){$[m?"unshift":"push"](()=>{z=m,s(2,z)})}const it=m=>{E(m.offsetX,m.offsetY)},rt=m=>{v(m.offsetX,m.offsetY)},ot=()=>{T()},lt=m=>E(m.touches[0].clientX,m.touches[0].clientY),ut=m=>{v(m.touches[0].clientX,m.touches[0].clientY)},ht=()=>{T()};function at(m){$[m?"unshift":"push"](()=>{d=m,s(3,d)})}return t.$$set=m=>{"img"in m&&s(10,i=m.img)},t.$$.update=()=>{t.$$.dirty[0]&15360&&s(4,n=({context:m,width:L,height:H})=>{m.globalAlpha=h,m.drawImage(i,L/2-a/2,H/2-f/2,a,f),m.globalAlpha=1,h==0&&(m.beginPath(),m.rect(L/2-a/2,H/2-f/2,a,f),m.stroke());for(let P=0;P<b.length;P++)b[P].draw(m,i,p,r)})},[u,W,z,d,n,E,v,T,et,tt,i,h,p,b,st,nt,it,rt,ot,lt,ut,ht,at]}class Kt extends ue{constructor(e){super(),le(this,e,Jt,$t,Q,{img:10},null,[-1,-1])}}function Ut(t){let e,s,n,i,l,h,r;const c=t[2].default,u=Ye(c,t,t[1],null);return{c(){e=M("div"),s=M("span"),s.textContent="\u2715",n=j(),i=M("div"),u&&u.c(),y(s,"class","svelte-1w2fu07"),y(i,"class","modal-content svelte-1w2fu07"),y(e,"class","modal svelte-1w2fu07")},m(o,a){C(o,e,a),w(e,s),w(e,n),w(e,i),u&&u.m(i,null),l=!0,h||(r=N(s,"click",t[0]),h=!0)},p(o,[a]){u&&u.p&&(!l||a&2)&&Xe(u,c,o,o[1],l?Fe(c,o[1],a,null):$e(o[1]),null)},i(o){l||(A(u,o),l=!0)},o(o){B(u,o),l=!1},d(o){o&&k(e),u&&u.d(o),h=!1,r()}}}function Qt(t,e,s){let{$$slots:n={},$$scope:i}=e;const l=vt(),h=()=>l("close");return t.$$set=r=>{"$$scope"in r&&s(1,i=r.$$scope)},[h,i,n]}class Vt extends ue{constructor(e){super(),le(this,e,Qt,Ut,Q,{})}}const je=t=>{const e=h=>String(h).padStart(2,"0");let s=t%1e3;t=(t-s)/1e3;let n=t%60;t=(t-n)/60;let i=t%60,l=(t-i)/60;return`${e(l)}:${e(i)}:${e(n)}.${e(s)}`};function Ie(t,e,s){const n=t.slice();return n[21]=e[s],n}function Le(t){let e,s,n,i,l,h,r,c,u,o,a;return{c(){e=M("form"),s=M("input"),n=j(),i=M("div"),l=M("button"),l.textContent="Select image",h=j(),r=M("p"),r.textContent="or",c=j(),u=M("button"),u.textContent="Solve random image",y(s,"type","file"),y(s,"id","img"),y(s,"name","img"),y(s,"accept","image/*"),y(e,"class","form-1"),y(l,"class","img-button"),y(i,"class","choose-or-random-buttons")},m(f,p){C(f,e,p),w(e,s),t[13](s),C(f,n,p),C(f,i,p),w(i,l),w(i,h),w(i,r),w(i,c),w(i,u),o||(a=[N(s,"change",t[14]),N(l,"click",gt(t[15])),N(u,"click",t[16])],o=!0)},p:O,d(f){f&&k(e),t[13](null),f&&k(n),f&&k(i),o=!1,F(a)}}}function qe(t){let e,s;return{c(){e=M("img"),_e(e.src,s=t[0])||y(e,"src",s),y(e,"alt","puzzle"),y(e,"width","700px")},m(n,i){C(n,e,i),t[17](e)},p(n,i){i&1&&!_e(e.src,s=n[0])&&y(e,"src",s)},d(n){n&&k(e),t[17](null)}}}function Ae(t){let e,s,n,i,l,h=t[8],r=[];for(let a=0;a<h.length;a+=1)r[a]=He(Ie(t,h,a));function c(a,f){if(a[3]==="Easy")return es;if(a[3]==="Medium")return xt;if(a[3]==="Hard")return Zt}let u=c(t),o=u&&u(t);return{c(){e=M("select");for(let a=0;a<r.length;a+=1)r[a].c();s=j(),o&&o.c(),n=Ge(),t[3]===void 0&&ie(()=>t[18].call(e))},m(a,f){C(a,e,f);for(let p=0;p<r.length;p+=1)r[p].m(e,null);ze(e,t[3]),C(a,s,f),o&&o.m(a,f),C(a,n,f),i||(l=[N(e,"change",t[18]),N(e,"click",t[11])],i=!0)},p(a,f){if(f&256){h=a[8];let p;for(p=0;p<h.length;p+=1){const b=Ie(a,h,p);r[p]?r[p].p(b,f):(r[p]=He(b),r[p].c(),r[p].m(e,null))}for(;p<r.length;p+=1)r[p].d(1);r.length=h.length}f&264&&ze(e,a[3]),u===(u=c(a))&&o?o.p(a,f):(o&&o.d(1),o=u&&u(a),o&&(o.c(),o.m(n.parentNode,n)))},d(a){a&&k(e),mt(r,a),a&&k(s),o&&o.d(a),a&&k(n),i=!1,F(l)}}}function He(t){let e,s=t[21]+"",n;return{c(){e=M("option"),n=R(s),e.__value=t[21],e.value=e.__value},m(i,l){C(i,e,l),w(e,n)},p:O,d(i){i&&k(e)}}}function Zt(t){let e,s,n,i,l,h;return{c(){e=M("p"),s=R("Selected Hard ("),n=R(t[4]),i=R(" x "),l=R(t[4]),h=R(")")},m(r,c){C(r,e,c),w(e,s),w(e,n),w(e,i),w(e,l),w(e,h)},p(r,c){c&16&&J(n,r[4]),c&16&&J(l,r[4])},d(r){r&&k(e)}}}function xt(t){let e,s,n,i,l,h;return{c(){e=M("p"),s=R("Selected Medium ("),n=R(t[4]),i=R(" x "),l=R(t[4]),h=R(")")},m(r,c){C(r,e,c),w(e,s),w(e,n),w(e,i),w(e,l),w(e,h)},p(r,c){c&16&&J(n,r[4]),c&16&&J(l,r[4])},d(r){r&&k(e)}}}function es(t){let e,s,n,i,l,h;return{c(){e=M("p"),s=R("Selected Easy ("),n=R(t[4]),i=R(" x "),l=R(t[4]),h=R(")")},m(r,c){C(r,e,c),w(e,s),w(e,n),w(e,i),w(e,l),w(e,h)},p(r,c){c&16&&J(n,r[4]),c&16&&J(l,r[4])},d(r){r&&k(e)}}}function Oe(t){let e,s;return e=new Kt({props:{img:t[2]}}),{c(){pe(e.$$.fragment)},m(n,i){re(e,n,i),s=!0},p(n,i){const l={};i&4&&(l.img=n[2]),e.$set(l)},i(n){s||(A(e.$$.fragment,n),s=!0)},o(n){B(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function De(t){let e,s;return e=new Vt({props:{$$slots:{default:[ts]},$$scope:{ctx:t}}}),e.$on("close",t[9]),{c(){pe(e.$$.fragment)},m(n,i){re(e,n,i),s=!0},p(n,i){const l={};i&16777280&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){s||(A(e.$$.fragment,n),s=!0)},o(n){B(e.$$.fragment,n),s=!1},d(n){oe(e,n)}}}function ts(t){let e,s,n,i,l=je(new Date-t[6])+"",h;return{c(){e=M("h2"),e.textContent="Puzzle solved!",s=j(),n=M("p"),i=R("Your time: "),h=R(l),y(n,"class","modal-text svelte-zl5323")},m(r,c){C(r,e,c),C(r,s,c),C(r,n,c),w(n,i),w(n,h)},p(r,c){c&64&&l!==(l=je(new Date-r[6])+"")&&J(h,l)},d(r){r&&k(e),r&&k(s),r&&k(n)}}}function ss(t){let e,s,n,i,l,h,r,c,u,o,a,f,p,b,I,g,q,W,S=!t[1]&&Le(t),z=t[0]&&qe(t),E=!t[1]&&Ae(t),v=t[1]&&Oe(t),_=t[7]&&De(t);return{c(){e=M("main"),s=M("h1"),s.textContent="Create your own jigsaw!",n=j(),S&&S.c(),i=j(),z&&z.c(),l=j(),E&&E.c(),h=j(),r=M("div"),c=M("input"),u=j(),o=M("label"),o.innerHTML="<p>Background image</p>",a=j(),f=M("button"),f.textContent="New Game",p=j(),v&&v.c(),b=j(),_&&_.c(),I=Ge(),y(c,"type","checkbox"),c.checked=!0,y(c,"id","switch"),y(c,"class","checkbox"),y(o,"for","switch"),y(o,"class","toggle"),y(r,"class","background-image-checkbox-wrapper"),y(e,"class","container svelte-zl5323")},m(d,T){C(d,e,T),w(e,s),w(e,n),S&&S.m(e,null),w(e,i),z&&z.m(e,null),w(e,l),E&&E.m(e,null),w(e,h),w(e,r),w(r,c),w(r,u),w(r,o),w(e,a),w(e,f),C(d,p,T),v&&v.m(d,T),C(d,b,T),_&&_.m(d,T),C(d,I,T),g=!0,q||(W=[N(c,"click",t[12]),N(f,"click",t[19])],q=!0)},p(d,[T]){d[1]?S&&(S.d(1),S=null):S?S.p(d,T):(S=Le(d),S.c(),S.m(e,i)),d[0]?z?z.p(d,T):(z=qe(d),z.c(),z.m(e,l)):z&&(z.d(1),z=null),d[1]?E&&(E.d(1),E=null):E?E.p(d,T):(E=Ae(d),E.c(),E.m(e,h)),d[1]?v?(v.p(d,T),T&2&&A(v,1)):(v=Oe(d),v.c(),A(v,1),v.m(b.parentNode,b)):v&&(Te(),B(v,1,1,()=>{v=null}),Ee()),d[7]?_?(_.p(d,T),T&128&&A(_,1)):(_=De(d),_.c(),A(_,1),_.m(I.parentNode,I)):_&&(Te(),B(_,1,1,()=>{_=null}),Ee())},i(d){g||(A(v),A(_),g=!0)},o(d){B(v),B(_),g=!1},d(d){d&&k(e),S&&S.d(),z&&z.d(),E&&E.d(),d&&k(p),v&&v.d(d),d&&k(b),_&&_.d(d),d&&k(I),q=!1,F(W)}}}function ns(t,e,s){let n,i;Pe(t,Re,d=>s(6,n=d)),Pe(t,we,d=>s(7,i=d));let l,h=!1,r;const c=["Easy","Medium","Hard"];let u=c[0];U.update(d=>5);let o;U.subscribe(d=>{s(4,o=d)}),te.update(d=>.4);let a;te.subscribe(d=>{a=d});function f(){s(1,h=!1),ke(we,i=!1,i),s(0,l=""),s(2,r.style.display="block",r)}function p(){l&&(s(1,h=!0),s(2,r.style.display="none",r),ke(Re,n=new Date,n))}function b(){u==="Easy"?U.update(d=>5):u==="Medium"?U.update(d=>7):u==="Hard"&&U.update(d=>10)}function I(){a>0?te.update(d=>0):te.update(d=>.4)}let g;function q(d){$[d?"unshift":"push"](()=>{g=d,s(5,g)})}const W=d=>{let T=d.target.form[0].files[0];T&&s(0,l=URL.createObjectURL(T))},S=()=>{g.click()},z=()=>s(0,l="https://picsum.photos/500?random="+Math.floor(Math.random()*1e3));function E(d){$[d?"unshift":"push"](()=>{r=d,s(2,r)})}function v(){u=wt(this),s(3,u),s(8,c)}return[l,h,r,u,o,g,n,i,c,f,p,b,I,q,W,S,z,E,v,()=>{h?f():p()}]}class is extends ue{constructor(e){super(),le(this,e,ns,ss,Q,{})}}new is({target:document.getElementById("app")});
