(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function I(){}const zt=e=>e;function Le(e,t){for(const n in t)e[n]=t[n];return e}function ue(e){return e()}function Wt(){return Object.create(null)}function D(e){e.forEach(ue)}function pt(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let gt;function ft(e,t){return gt||(gt=document.createElement("a")),gt.href=t,e===gt.href}function Ie(e){return Object.keys(e).length===0}function qe(e,...t){if(e==null)return I;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Yt(e,t,n){e.$$.on_destroy.push(qe(t,n))}function Lt(e,t,n,s){if(e){const i=ae(e,t,n,s);return e[0](i)}}function ae(e,t,n,s){return e[1]&&s?Le(n.ctx.slice(),e[1](s(t))):n.ctx}function It(e,t,n,s){if(e[2]&&s){const i=e[2](s(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(t.dirty.length,i.length);for(let r=0;r<l;r+=1)o[r]=t.dirty[r]|i[r];return o}return t.dirty|i}return t.dirty}function qt(e,t,n,s,i,o){if(i){const l=ae(t,n,s,o);e.p(l,i)}}function Ot(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let s=0;s<n;s++)t[s]=-1;return t}return-1}function Gt(e,t,n){return e.set(n),t}function Oe(e){return e&&pt(e.destroy)?e.destroy:I}const ce=typeof window<"u";let At=ce?()=>window.performance.now():()=>Date.now(),Dt=ce?e=>requestAnimationFrame(e):I;const x=new Set;function fe(e){x.forEach(t=>{t.c(e)||(x.delete(t),t.f())}),x.size!==0&&Dt(fe)}function Ft(e){let t;return x.size===0&&Dt(fe),{promise:new Promise(n=>{x.add(t={c:e,f:n})}),abort(){x.delete(t)}}}function v(e,t){e.appendChild(t)}function he(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ae(e){const t=M("style");return De(he(e),t),t.sheet}function De(e,t){return v(e.head||e,t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode.removeChild(e)}function Fe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function M(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function E(){return S(" ")}function He(){return S("")}function L(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function Ne(e){return function(t){return t.preventDefault(),e.call(this,t)}}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Be(e){return Array.from(e.childNodes)}function U(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function de(e,t,n,s){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function Xt(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}function We(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function Jt(e,t,n){e.classList[n?"add":"remove"](t)}function pe(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}const vt=new Map;let kt=0;function Ye(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ge(e,t){const n={stylesheet:Ae(t),rules:{}};return vt.set(e,n),n}function Mt(e,t,n,s,i,o,l,r=0){const u=16.666/s;let a=`{
`;for(let g=0;g<=1;g+=u){const p=t+(n-t)*o(g);a+=g*100+`%{${l(p,1-p)}}
`}const h=a+`100% {${l(n,1-n)}}
}`,d=`__svelte_${Ye(h)}_${r}`,c=he(e),{stylesheet:f,rules:m}=vt.get(c)||Ge(c,e);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${h}`,f.cssRules.length));const _=e.style.animation||"";return e.style.animation=`${_?`${_}, `:""}${d} ${s}ms linear ${i}ms 1 both`,kt+=1,d}function Pt(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-s.length;i&&(e.style.animation=s.join(", "),kt-=i,kt||Xe())}function Xe(){Dt(()=>{kt||(vt.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&w(t)}),vt.clear())})}let ht;function ct(e){ht=e}function nt(){if(!ht)throw new Error("Function called outside component initialization");return ht}function Je(e){nt().$$.on_mount.push(e)}function me(e){nt().$$.on_destroy.push(e)}function Ke(){const e=nt();return(t,n,{cancelable:s=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=pe(t,n,{cancelable:s});return i.slice().forEach(l=>{l.call(e,o)}),!o.defaultPrevented}return!0}}function Ue(e,t){return nt().$$.context.set(e,t),t}function Qe(e){return nt().$$.context.get(e)}function Ve(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(s=>s.call(this,t))}const ut=[],G=[],yt=[],Kt=[],Ze=Promise.resolve();let Tt=!1;function xe(){Tt||(Tt=!0,Ze.then(_e))}function W(e){yt.push(e)}const Ct=new Set;let bt=0;function _e(){const e=ht;do{for(;bt<ut.length;){const t=ut[bt];bt++,ct(t),tn(t.$$)}for(ct(null),ut.length=0,bt=0;G.length;)G.pop()();for(let t=0;t<yt.length;t+=1){const n=yt[t];Ct.has(n)||(Ct.add(n),n())}yt.length=0}while(ut.length);for(;Kt.length;)Kt.pop()();Tt=!1,Ct.clear(),ct(e)}function tn(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}let lt;function Ht(){return lt||(lt=Promise.resolve(),lt.then(()=>{lt=null})),lt}function K(e,t,n){e.dispatchEvent(pe(`${t?"intro":"outro"}${n}`))}const wt=new Set;let B;function Et(){B={r:0,c:[],p:B}}function St(){B.r||D(B.c),B=B.p}function R(e,t){e&&e.i&&(wt.delete(e),e.i(t))}function A(e,t,n,s){if(e&&e.o){if(wt.has(e))return;wt.add(e),B.c.push(()=>{wt.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const Nt={duration:0};function en(e,t,n){let s=t(e,n),i=!1,o,l,r=0;function u(){o&&Pt(e,o)}function a(){const{delay:d=0,duration:c=300,easing:f=zt,tick:m=I,css:_}=s||Nt;_&&(o=Mt(e,0,1,c,d,f,_,r++)),m(0,1);const g=At()+d,p=g+c;l&&l.abort(),i=!0,W(()=>K(e,!0,"start")),l=Ft($=>{if(i){if($>=p)return m(1,0),K(e,!0,"end"),u(),i=!1;if($>=g){const z=f(($-g)/c);m(z,1-z)}}return i})}let h=!1;return{start(){h||(h=!0,Pt(e),pt(s)?(s=s(),Ht().then(a)):a())},invalidate(){h=!1},end(){i&&(u(),i=!1)}}}function nn(e,t,n){let s=t(e,n),i=!0,o;const l=B;l.r+=1;function r(){const{delay:u=0,duration:a=300,easing:h=zt,tick:d=I,css:c}=s||Nt;c&&(o=Mt(e,1,0,a,u,h,c));const f=At()+u,m=f+a;W(()=>K(e,!1,"start")),Ft(_=>{if(i){if(_>=m)return d(0,1),K(e,!1,"end"),--l.r||D(l.c),!1;if(_>=f){const g=h((_-f)/a);d(1-g,g)}}return i})}return pt(s)?Ht().then(()=>{s=s(),r()}):r(),{end(u){u&&s.tick&&s.tick(1,0),i&&(o&&Pt(e,o),i=!1)}}}function Ut(e,t,n,s){let i=t(e,n),o=s?0:1,l=null,r=null,u=null;function a(){u&&Pt(e,u)}function h(c,f){const m=c.b-o;return f*=Math.abs(m),{a:o,b:c.b,d:m,duration:f,start:c.start,end:c.start+f,group:c.group}}function d(c){const{delay:f=0,duration:m=300,easing:_=zt,tick:g=I,css:p}=i||Nt,$={start:At()+f,b:c};c||($.group=B,B.r+=1),l||r?r=$:(p&&(a(),u=Mt(e,o,c,m,f,_,p)),c&&g(0,1),l=h($,m),W(()=>K(e,c,"start")),Ft(z=>{if(r&&z>r.start&&(l=h(r,m),r=null,K(e,l.b,"start"),p&&(a(),u=Mt(e,o,l.b,l.duration,0,_,i.css))),l){if(z>=l.end)g(o=l.b,1-o),K(e,l.b,"end"),r||(l.b?a():--l.group.r||D(l.group.c)),l=null;else if(z>=l.start){const F=z-l.start;o=l.a+l.d*_(F/l.duration),g(o,1-o)}}return!!(l||r)}))}return{run(c){pt(i)?Ht().then(()=>{i=i(),d(c)}):d(c)},end(){a(),l=r=null}}}const sn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function dt(e){e&&e.c()}function tt(e,t,n,s){const{fragment:i,on_mount:o,on_destroy:l,after_update:r}=e.$$;i&&i.m(t,n),s||W(()=>{const u=o.map(ue).filter(pt);l?l.push(...u):D(u),e.$$.on_mount=[]}),r.forEach(W)}function et(e,t){const n=e.$$;n.fragment!==null&&(D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function rn(e,t){e.$$.dirty[0]===-1&&(ut.push(e),xe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function st(e,t,n,s,i,o,l,r=[-1]){const u=ht;ct(e);const a=e.$$={fragment:null,ctx:null,props:o,update:I,not_equal:i,bound:Wt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Wt(),dirty:r,skip_bound:!1,root:t.target||u.$$.root};l&&l(a.root);let h=!1;if(a.ctx=n?n(e,t.props||{},(d,c,...f)=>{const m=f.length?f[0]:c;return a.ctx&&i(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),h&&rn(e,d)),c}):[],a.update(),h=!0,D(a.before_update),a.fragment=s?s(a.ctx):!1,t.target){if(t.hydrate){const d=Be(t.target);a.fragment&&a.fragment.l(d),d.forEach(w)}else a.fragment&&a.fragment.c();t.intro&&R(e.$$.fragment),tt(e,t.target,t.anchor,t.customElement),_e()}ct(u)}class it{$destroy(){et(this,1),this.$destroy=I}$on(t,n){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const on=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function ln(){const e=nt();return t=>{const n=on.map(s=>L(t,s,i=>Ve(e,i)));return{destroy:()=>n.forEach(s=>s())}}}class un{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:t,render:n}){return t&&(this.setups.set(this.currentLayerId,t),this.needsSetup=!0),this.renderers.set(this.currentLayerId,n),this.needsRedraw=!0,this.currentLayerId++}unregister(t){this.renderers.delete(t),this.needsRedraw=!0}render({autoclear:t,pixelRatio:n,context:s,width:i,height:o}){const l={context:s,width:i,height:o};if(this.needsResize&&(s.setTransform(n,0,0,n,0,0),this.needsResize=!1),this.needsSetup){for(const[r,u]of this.setups)u(l),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){t&&s.clearRect(0,0,i,o);for(const r of this.layerSequence)this.renderers.get(r)(l);this.needsRedraw=!1}}}function an(e){let t,n,s,i,o,l,r,u,a;const h=e[13].default,d=Lt(h,e,e[12],null);return{c(){t=M("canvas"),o=E(),l=M("div"),d&&d.c(),y(t,"style",n="display: block; width: "+e[1]+"px; height: "+e[2]+"px;"+(e[3]?` ${e[3]}`:"")),y(t,"width",s=e[1]*e[0]),y(t,"height",i=e[2]*e[0]),de(l,"display","none")},m(c,f){k(c,t,f),e[14](t),k(c,o,f),k(c,l,f),d&&d.m(l,null),e[15](l),r=!0,u||(a=Oe(e[6].call(null,t)),u=!0)},p(c,[f]){(!r||f&14&&n!==(n="display: block; width: "+c[1]+"px; height: "+c[2]+"px;"+(c[3]?` ${c[3]}`:"")))&&y(t,"style",n),(!r||f&3&&s!==(s=c[1]*c[0]))&&y(t,"width",s),(!r||f&5&&i!==(i=c[2]*c[0]))&&y(t,"height",i),d&&d.p&&(!r||f&4096)&&qt(d,h,c,c[12],r?It(h,c[12],f,null):Ot(c[12]),null)},i(c){r||(R(d,c),r=!0)},o(c){A(d,c),r=!1},d(c){c&&w(t),e[14](null),c&&w(o),c&&w(l),d&&d.d(c),e[15](null),u=!1,a()}}}const ge={};function cn(e,t,n){let{$$slots:s={},$$scope:i}=t,{width:o=640,height:l=640,pixelRatio:r=void 0,style:u=null,autoclear:a=!0}=t,h,d,c,f,m;const _=ln(),g=new un;function p(){g.redraw()}function $(){return h}function z(){return d}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function F(){g.render({context:d,width:o,height:l,pixelRatio:r,autoclear:a}),c=window.requestAnimationFrame(F)}Ue(ge,{register:g.register,unregister:g.unregister,redraw:g.redraw}),Je(()=>{d=h.getContext("2d"),m=new MutationObserver(C),m.observe(f,{childList:!0}),C(),F();function C(){const _t=[...f.children].map(P=>+P.dataset.layerId);n(11,g.layerSequence=_t,g),g.redraw()}}),me(()=>{typeof window>"u"||(window.cancelAnimationFrame(c),m.disconnect())});function Y(C){G[C?"unshift":"push"](()=>{h=C,n(4,h)})}function X(C){G[C?"unshift":"push"](()=>{f=C,n(5,f)})}return e.$$set=C=>{"width"in C&&n(1,o=C.width),"height"in C&&n(2,l=C.height),"pixelRatio"in C&&n(0,r=C.pixelRatio),"style"in C&&n(3,u=C.style),"autoclear"in C&&n(7,a=C.autoclear),"$$scope"in C&&n(12,i=C.$$scope)},e.$$.update=()=>{e.$$.dirty&2183&&g.resize()},[r,o,l,u,h,f,_,a,p,$,z,g,i,s,Y,X]}class fn extends it{constructor(t){super(),st(this,t,cn,an,Q,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function hn(e){let t;return{c(){t=M("div"),y(t,"data-layer-id",e[0])},m(n,s){k(n,t,s)},p:I,i:I,o:I,d(n){n&&w(t)}}}function dn(e,t,n){const{register:s,unregister:i,redraw:o}=Qe(ge);let{setup:l=void 0,render:r=()=>{}}=t;if(typeof l!="function"&&l!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const u=s({setup:l,render:r});return me(()=>i(u)),e.$$set=a=>{"setup"in a&&n(1,l=a.setup),"render"in a&&n(2,r=a.render)},e.$$.update=()=>{e.$$.dirty&4&&o()},[u,l,r]}class pn extends it{constructor(t){super(),st(this,t,dn,hn,Q,{setup:1,render:2})}}const Z=[];function mn(e,t){return{subscribe:mt(e,t).subscribe}}function mt(e,t=I){let n;const s=new Set;function i(r){if(Q(e,r)&&(e=r,n)){const u=!Z.length;for(const a of s)a[1](),Z.push(a,e);if(u){for(let a=0;a<Z.length;a+=2)Z[a][0](Z[a+1]);Z.length=0}}}function o(r){i(r(e))}function l(r,u=I){const a=[r,u];return s.add(a),s.size===1&&(n=t(i)||I),r(e),()=>{s.delete(a),s.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}let Qt;const be=Date.now();function ye(e){return e(Date.now()-be),Qt=window.requestAnimationFrame(()=>ye(e)),()=>window.cancelAnimationFrame(Qt)}function _n(){}mn(Date.now()-be,typeof window>"u"?_n:ye);const gn="/jigsaw-svelte/assets/puzzle.7b2c6e4e.wav";class bn{constructor(t,n,s,i,o,l){this.width=o,this.height=l,this.i=t,this.j=n,this.correctPos={x:s.x,y:s.y},this.currentPos={x:i.x,y:i.y},this.path=null,this.borderpath=null,this.shape={},this.solved=!1}draw(t,n,s,i,o=i){const l=Math.min(this.width,this.height),r=.08*l,u=.2*l,a=.2*l;let h=this.currentPos.x+s;this.path=new Path2D,this.path.moveTo(h,this.currentPos.y),this.shape.top&&(this.path.lineTo(h+this.width*Math.abs(this.shape.top)-r,this.currentPos.y),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.top)-r,this.currentPos.y-a*Math.sign(this.shape.top)*.2,h+this.width*Math.abs(this.shape.top)-u,this.currentPos.y-a*Math.sign(this.shape.top),h+this.width*Math.abs(this.shape.top),this.currentPos.y-a*Math.sign(this.shape.top)),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.top)+u,this.currentPos.y-a*Math.sign(this.shape.top),h+this.width*Math.abs(this.shape.top)+r,this.currentPos.y-a*Math.sign(this.shape.top)*.2,h+this.width*Math.abs(this.shape.top)+r,this.currentPos.y)),this.path.lineTo(h+this.width,this.currentPos.y),this.shape.right&&(this.path.lineTo(h+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)-r),this.path.bezierCurveTo(h+this.width-a*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)-r,h+this.width-a*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)-u,h+this.width-a*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)),this.path.bezierCurveTo(h+this.width-a*Math.sign(this.shape.right),this.currentPos.y+this.height*Math.abs(this.shape.right)+u,h+this.width-a*Math.sign(this.shape.right)*.2,this.currentPos.y+this.height*Math.abs(this.shape.right)+r,h+this.width,this.currentPos.y+this.height*Math.abs(this.shape.right)+r)),this.path.lineTo(h+this.width,this.currentPos.y+this.height),this.shape.bottom&&(this.path.lineTo(h+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.bottom)+r,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom)*.2,h+this.width*Math.abs(this.shape.bottom)+u,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom),h+this.width*Math.abs(this.shape.bottom),this.currentPos.y+this.height+a*Math.sign(this.shape.bottom)),this.path.bezierCurveTo(h+this.width*Math.abs(this.shape.bottom)-u,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom),h+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height+a*Math.sign(this.shape.bottom)*.2,h+this.width*Math.abs(this.shape.bottom)-r,this.currentPos.y+this.height)),this.path.lineTo(h,this.currentPos.y+this.height),this.shape.left&&(this.path.lineTo(h,this.currentPos.y+this.height*Math.abs(this.shape.left)+r),this.path.bezierCurveTo(h+a*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)+r,h+a*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)+u,h+a*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)),this.path.bezierCurveTo(h+a*Math.sign(this.shape.left),this.currentPos.y+this.height*Math.abs(this.shape.left)-u,h+a*Math.sign(this.shape.left)*.2,this.currentPos.y+this.height*Math.abs(this.shape.left)-r,h,this.currentPos.y+this.height*Math.abs(this.shape.left)-r)),this.path.lineTo(h,this.currentPos.y),t.save(),t.clip(this.path);let d=n.naturalWidth/o,c=n.naturalHeight/i,f=Math.min(d,c)*a/l;t.drawImage(n,this.i*d-f,this.j*c-f,d+f*2,c+f*2,h-a,this.currentPos.y-a,this.width+a*2,this.height+a*2),t.restore(),t.stroke(this.path)}}const J=mt(0),at=mt(0),Vt=mt(null),Rt=mt(!1),{window:jt}=sn;function yn(e){let t,n;return t=new pn({props:{render:e[4],setup:e[10]}}),{c(){dt(t.$$.fragment)},m(s,i){tt(t,s,i),n=!0},p(s,i){const o={};i[0]&16&&(o.render=s[4]),t.$set(o)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){A(t.$$.fragment,s),n=!1},d(s){et(t,s)}}}function wn(e){let t,n,s,i,o,l,r,u;W(e[15]);let a={width:e[0],height:e[5],style:"margin: 0 auto; touch-action: none;border: 1px solid black; cursor: "+e[1]+";",$$slots:{default:[yn]},$$scope:{ctx:e}};return t=new fn({props:a}),e[16](t),t.$on("mousedown",e[17]),t.$on("mousemove",e[18]),t.$on("mouseup",e[19]),t.$on("touchstart",e[20]),t.$on("touchmove",e[21]),t.$on("touchend",e[22]),{c(){dt(t.$$.fragment),n=E(),s=M("audio"),i=M("track"),y(i,"kind","captions"),ft(s.src,o=gn)||y(s,"src",o),y(s,"preload","auto"),s.controls=!0},m(h,d){tt(t,h,d),k(h,n,d),k(h,s,d),v(s,i),e[23](s),l=!0,r||(u=[L(jt,"resize",e[9]),L(jt,"resize",e[15])],r=!0)},p(h,d){const c={};d[0]&1&&(c.width=h[0]),d[0]&2&&(c.style="margin: 0 auto; touch-action: none;border: 1px solid black; cursor: "+h[1]+";"),d[0]&16|d[1]&512&&(c.$$scope={dirty:d,ctx:h}),t.$set(c)},i(h){l||(R(t.$$.fragment,h),l=!0)},o(h){A(t.$$.fragment,h),l=!1},d(h){e[16](null),et(t,h),h&&w(n),h&&w(s),e[23](null),r=!1,D(u)}}}const vn=.7;function kn(e,t,n){let s,{img:i}=t,o;J.subscribe(b=>{o=b});let l;at.subscribe(b=>{n(12,l=b)}),window.devicePixelRatio=1;const r=o,u=o;let a=window.innerWidth;const h=window.innerHeight,d=vn*Math.min(a/i.naturalWidth,h/i.naturalHeight),c=d*i.naturalWidth,f=d*i.naturalHeight;let m=a/2-c/2,_=[],g,p,$=0,z="default";function F(b,q,j){for(let T=0;T<b.length;T++)b[T].currentPos.x=Math.floor(Math.random()*q)-m,b[T].currentPos.y=Math.floor(Math.random()*j)}let Y;function X(b,q,j=null){let T=Y.getContext();for(let O=_.length-1;O>=0;O--)if(T.isPointInPath(_[O].path,b,q)){p=_[O];break}if(p){j&&j.preventDefault(),n(1,z="grab"),g={x:b-p.currentPos.x,y:q-p.currentPos.y};let O=_.splice(_.findIndex(H=>H.j==p.j&&H.i==p.i),1);_.push(O[0]),n(14,_)}}function C(b,q,j=null){g&&(j&&j.preventDefault(),p.currentPos.x=b-g.x,p.currentPos.y=q-g.y,n(14,_))}function _t(){$===_.length&&Rt.update(q=>!0)}let P;function V(){let b=null;if(p){n(1,z="default");let q=30;const j=_.findIndex(T=>T.j==p.j&&T.i==p.i);if(Math.abs(p.currentPos.x-p.correctPos.x)<q&&Math.abs(p.currentPos.y-p.correctPos.y)<q){P.play(),b=setTimeout(()=>{P.pause(),n(3,P.currentTime=0,P)},500),p.currentPos.x=p.correctPos.x,p.currentPos.y=p.correctPos.y;let T=_.splice(j,1);p.solved||(T[0].solved=!0,$=$+1),b&&clearTimeout(b),_.unshift(T[0]),n(14,_)}else p.solved&&(n(14,_[j].solved=!1,_),$=$-1);g=null,p=null}_t()}function ve(){n(13,m=a/2-c/2),Y.redraw()}let Bt;function ke(){clearTimeout(Bt),Bt=setTimeout(ve,100)}const Me=({context:b,width:q,height:j})=>{for(let O=0;O<u;O++)for(let H=0;H<r;H++){let rt=O*c/u,ot=j/2-f/2+H*f/r,N=new bn(O,H,{x:rt,y:ot},{x:rt,y:ot},c/u,f/r);_.push(N)}let T=0;for(let O=0;O<u;O++)for(let H=0;H<r;H++){let rt=H,ot=O,N=_[T];if(rt==r-1)N.shape.bottom=null;else{let $t=Math.random()-.5<0?-1:1;N.shape.bottom=$t*(Math.random()*.4+.3)}if(ot==u-1)N.shape.right=null;else{let $t=Math.random()-.5<0?-1:1;N.shape.right=$t*(Math.random()*.4+.3)}rt==0?N.shape.top=null:N.shape.top=-_[T-1].shape.bottom,ot==0?N.shape.left=null:N.shape.left=-_[T-r].shape.right,T++}F(_,q-c/u,j-f/r)};function Pe(){n(0,a=jt.innerWidth)}function ze(b){G[b?"unshift":"push"](()=>{Y=b,n(2,Y)})}const $e=b=>{X(b.offsetX,b.offsetY)},Ce=b=>{C(b.offsetX,b.offsetY)},Te=()=>{V()},Ee=b=>X(b.touches[0].clientX,b.touches[0].clientY,b),Se=b=>{C(b.touches[0].clientX,b.touches[0].clientY,b)},Re=()=>{V()};function je(b){G[b?"unshift":"push"](()=>{P=b,n(3,P)})}return e.$$set=b=>{"img"in b&&n(11,i=b.img)},e.$$.update=()=>{e.$$.dirty[0]&30720&&n(4,s=({context:b,width:q,height:j})=>{b.globalAlpha=l,b.drawImage(i,q/2-c/2,j/2-f/2,c,f),b.globalAlpha=1,l==0&&(b.beginPath(),b.rect(q/2-c/2,j/2-f/2,c,f),b.stroke());for(let T=0;T<_.length;T++)_[T].draw(b,i,m,r)})},[a,z,Y,P,s,h,X,C,V,ke,Me,i,l,m,_,Pe,ze,$e,Ce,Te,Ee,Se,Re,je]}class Mn extends it{constructor(t){super(),st(this,t,kn,wn,Q,{img:11},null,[-1,-1])}}function we(e){const t=e-1;return t*t*t+1}function Pn(e,{delay:t=0,duration:n=400,easing:s=zt}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:o=>`opacity: ${o*i}`}}function Zt(e,{delay:t=0,duration:n=400,easing:s=we}={}){const i=getComputedStyle(e),o=+i.opacity,l=parseFloat(i.height),r=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),a=parseFloat(i.marginTop),h=parseFloat(i.marginBottom),d=parseFloat(i.borderTopWidth),c=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:s,css:f=>`overflow: hidden;opacity: ${Math.min(f*20,1)*o};height: ${f*l}px;padding-top: ${f*r}px;padding-bottom: ${f*u}px;margin-top: ${f*a}px;margin-bottom: ${f*h}px;border-top-width: ${f*d}px;border-bottom-width: ${f*c}px;`}}function zn(e,{delay:t=0,duration:n=400,easing:s=we,start:i=0,opacity:o=0}={}){const l=getComputedStyle(e),r=+l.opacity,u=l.transform==="none"?"":l.transform,a=1-i,h=r*(1-o);return{delay:t,duration:n,easing:s,css:(d,c)=>`
			transform: ${u} scale(${1-a*c});
			opacity: ${r-h*c}
		`}}function $n(e){let t,n,s,i,o,l,r,u,a;const h=e[2].default,d=Lt(h,e,e[1],null);return{c(){t=M("div"),n=M("span"),n.textContent="\u2715",s=E(),i=M("div"),d&&d.c(),y(n,"class","svelte-5gidyv"),y(i,"class","modal-content svelte-5gidyv"),y(t,"class","modal svelte-5gidyv")},m(c,f){k(c,t,f),v(t,n),v(t,s),v(t,i),d&&d.m(i,null),r=!0,u||(a=L(n,"click",e[0]),u=!0)},p(c,[f]){d&&d.p&&(!r||f&2)&&qt(d,h,c,c[1],r?It(h,c[1],f,null):Ot(c[1]),null)},i(c){r||(R(d,c),W(()=>{l&&l.end(1),o=en(t,zn,{}),o.start()}),r=!0)},o(c){A(d,c),o&&o.invalidate(),l=nn(t,Pn,{}),r=!1},d(c){c&&w(t),d&&d.d(c),c&&l&&l.end(),u=!1,a()}}}function Cn(e,t,n){let{$$slots:s={},$$scope:i}=t;const o=Ke(),l=()=>o("close");return e.$$set=r=>{"$$scope"in r&&n(1,i=r.$$scope)},[l,i,s]}class Tn extends it{constructor(t){super(),st(this,t,Cn,$n,Q,{})}}function xt(e){let t,n,s,i,o;const l=e[4].default,r=Lt(l,e,e[3],null);return{c(){t=M("div"),r&&r.c(),y(t,"class","menu-content svelte-r61iqn")},m(u,a){k(u,t,a),r&&r.m(t,null),s=!0,i||(o=[L(t,"outrostart",e[5]),L(t,"outroend",e[6])],i=!0)},p(u,a){r&&r.p&&(!s||a&8)&&qt(r,l,u,u[3],s?It(l,u[3],a,null):Ot(u[3]),null)},i(u){s||(R(r,u),W(()=>{n||(n=Ut(t,Zt,{},!0)),n.run(1)}),s=!0)},o(u){A(r,u),n||(n=Ut(t,Zt,{},!1)),n.run(0),s=!1},d(u){u&&w(t),r&&r.d(u),u&&n&&n.end(),i=!1,D(o)}}}function En(e){let t,n,s,i,o,l,r=e[0]&&xt(e);return{c(){t=M("section"),n=M("span"),n.textContent="\u2022\u2022\u2022",s=E(),r&&r.c(),y(t,"class","svelte-r61iqn"),Jt(t,"outro",e[1])},m(u,a){k(u,t,a),v(t,n),v(t,s),r&&r.m(t,null),i=!0,o||(l=L(t,"click",e[2]),o=!0)},p(u,[a]){u[0]?r?(r.p(u,a),a&1&&R(r,1)):(r=xt(u),r.c(),R(r,1),r.m(t,null)):r&&(Et(),A(r,1,1,()=>{r=null}),St()),(!i||a&2)&&Jt(t,"outro",u[1])},i(u){i||(R(r),i=!0)},o(u){A(r),i=!1},d(u){u&&w(t),r&&r.d(),o=!1,l()}}}function Sn(e,t,n){let{$$slots:s={},$$scope:i}=t,o=!1,l=!1;function r(){n(0,o=!o)}const u=()=>n(1,l=!0),a=()=>n(1,l=!1);return e.$$set=h=>{"$$scope"in h&&n(3,i=h.$$scope)},[o,l,r,i,s,u,a]}class Rn extends it{constructor(t){super(),st(this,t,Sn,En,Q,{})}}const te=e=>{const t=l=>String(l).padStart(2,"0");let n=e%1e3;e=(e-n)/1e3;let s=e%60;e=(e-s)/60;let i=e%60,o=(e-i)/60;return`${t(o)}:${t(i)}:${t(s)}.${t(n)}`};function ee(e,t,n){const s=e.slice();return s[22]=t[n],s}function ne(e){let t,n,s,i,o,l,r,u,a,h,d,c,f;return{c(){t=M("h1"),t.textContent="Create your own jigsaw!",n=E(),s=M("form"),i=M("input"),o=E(),l=M("div"),r=M("button"),r.textContent="Select image",u=E(),a=M("p"),a.textContent="or",h=E(),d=M("button"),d.textContent="Solve random image",y(i,"type","file"),y(i,"id","img"),y(i,"name","img"),y(i,"accept","image/*"),y(s,"class","form-1"),y(r,"class","img-button"),y(l,"class","choose-or-random-buttons")},m(m,_){k(m,t,_),k(m,n,_),k(m,s,_),v(s,i),e[13](i),k(m,o,_),k(m,l,_),v(l,r),v(l,u),v(l,a),v(l,h),v(l,d),c||(f=[L(i,"change",e[14]),L(r,"click",Ne(e[15])),L(d,"click",e[16])],c=!0)},p:I,d(m){m&&w(t),m&&w(n),m&&w(s),e[13](null),m&&w(o),m&&w(l),c=!1,D(f)}}}function se(e){let t,n;return{c(){t=M("img"),ft(t.src,n=e[0])||y(t,"src",n),y(t,"alt","puzzle"),y(t,"width","700px")},m(s,i){k(s,t,i),e[17](t)},p(s,i){i&1&&!ft(t.src,n=s[0])&&y(t,"src",n)},d(s){s&&w(t),e[17](null)}}}function ie(e){let t,n,s,i,o,l,r,u,a,h,d,c=e[8],f=[];for(let p=0;p<c.length;p+=1)f[p]=re(ee(e,c,p));function m(p,$){if(p[3]==="Easy")return In;if(p[3]==="Medium")return Ln;if(p[3]==="Hard")return jn}let _=m(e),g=_&&_(e);return{c(){t=M("select");for(let p=0;p<f.length;p+=1)f[p].c();n=E(),g&&g.c(),s=E(),i=M("div"),o=M("input"),l=E(),r=M("label"),r.innerHTML="<p>Background image</p>",u=E(),a=M("button"),a.textContent="New Game",e[3]===void 0&&W(()=>e[18].call(t)),y(o,"type","checkbox"),o.checked=!0,y(o,"id","switch"),y(o,"class","checkbox"),y(r,"for","switch"),y(r,"class","toggle"),y(i,"class","background-image-checkbox-wrapper")},m(p,$){k(p,t,$);for(let z=0;z<f.length;z+=1)f[z].m(t,null);Xt(t,e[3]),k(p,n,$),g&&g.m(p,$),k(p,s,$),k(p,i,$),v(i,o),v(i,l),v(i,r),k(p,u,$),k(p,a,$),h||(d=[L(t,"change",e[18]),L(t,"click",e[11]),L(o,"click",e[12]),L(a,"click",e[19])],h=!0)},p(p,$){if($&256){c=p[8];let z;for(z=0;z<c.length;z+=1){const F=ee(p,c,z);f[z]?f[z].p(F,$):(f[z]=re(F),f[z].c(),f[z].m(t,null))}for(;z<f.length;z+=1)f[z].d(1);f.length=c.length}$&264&&Xt(t,p[3]),_===(_=m(p))&&g?g.p(p,$):(g&&g.d(1),g=_&&_(p),g&&(g.c(),g.m(s.parentNode,s)))},d(p){p&&w(t),Fe(f,p),p&&w(n),g&&g.d(p),p&&w(s),p&&w(i),p&&w(u),p&&w(a),h=!1,D(d)}}}function re(e){let t,n=e[22]+"",s;return{c(){t=M("option"),s=S(n),t.__value=e[22],t.value=t.__value},m(i,o){k(i,t,o),v(t,s)},p:I,d(i){i&&w(t)}}}function jn(e){let t,n,s,i,o,l;return{c(){t=M("p"),n=S("Selected Hard ("),s=S(e[4]),i=S(" x "),o=S(e[4]),l=S(")")},m(r,u){k(r,t,u),v(t,n),v(t,s),v(t,i),v(t,o),v(t,l)},p(r,u){u&16&&U(s,r[4]),u&16&&U(o,r[4])},d(r){r&&w(t)}}}function Ln(e){let t,n,s,i,o,l;return{c(){t=M("p"),n=S("Selected Medium ("),s=S(e[4]),i=S(" x "),o=S(e[4]),l=S(")")},m(r,u){k(r,t,u),v(t,n),v(t,s),v(t,i),v(t,o),v(t,l)},p(r,u){u&16&&U(s,r[4]),u&16&&U(o,r[4])},d(r){r&&w(t)}}}function In(e){let t,n,s,i,o,l;return{c(){t=M("p"),n=S("Selected Easy ("),s=S(e[4]),i=S(" x "),o=S(e[4]),l=S(")")},m(r,u){k(r,t,u),v(t,n),v(t,s),v(t,i),v(t,o),v(t,l)},p(r,u){u&16&&U(s,r[4]),u&16&&U(o,r[4])},d(r){r&&w(t)}}}function oe(e){let t,n,s,i;return t=new Mn({props:{img:e[2]}}),s=new Rn({props:{$$slots:{default:[qn]},$$scope:{ctx:e}}}),{c(){dt(t.$$.fragment),n=E(),dt(s.$$.fragment)},m(o,l){tt(t,o,l),k(o,n,l),tt(s,o,l),i=!0},p(o,l){const r={};l&4&&(r.img=o[2]),t.$set(r);const u={};l&33554435&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){i||(R(t.$$.fragment,o),R(s.$$.fragment,o),i=!0)},o(o){A(t.$$.fragment,o),A(s.$$.fragment,o),i=!1},d(o){et(t,o),o&&w(n),et(s,o)}}}function qn(e){let t,n,s,i,o,l,r,u,a,h,d;return{c(){t=M("img"),s=E(),i=M("div"),o=M("input"),l=E(),r=M("label"),r.innerHTML="<p>Background image</p>",u=E(),a=M("button"),a.textContent="New Game",ft(t.src,n=e[0])||y(t,"src",n),y(t,"alt","solved jigsaw"),de(t,"max-width","32rem"),y(o,"type","checkbox"),o.checked=!0,y(o,"id","switch"),y(o,"class","checkbox"),y(r,"for","switch"),y(r,"class","toggle"),y(i,"class","background-image-checkbox-wrapper")},m(c,f){k(c,t,f),k(c,s,f),k(c,i,f),v(i,o),v(i,l),v(i,r),k(c,u,f),k(c,a,f),h||(d=[L(o,"click",e[12]),L(a,"click",e[20])],h=!0)},p(c,f){f&1&&!ft(t.src,n=c[0])&&y(t,"src",n)},d(c){c&&w(t),c&&w(s),c&&w(i),c&&w(u),c&&w(a),h=!1,D(d)}}}function le(e){let t,n;return t=new Tn({props:{$$slots:{default:[On]},$$scope:{ctx:e}}}),t.$on("close",e[9]),{c(){dt(t.$$.fragment)},m(s,i){tt(t,s,i),n=!0},p(s,i){const o={};i&33554496&&(o.$$scope={dirty:i,ctx:s}),t.$set(o)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){A(t.$$.fragment,s),n=!1},d(s){et(t,s)}}}function On(e){let t,n,s,i,o=te(new Date-e[6])+"",l;return{c(){t=M("h2"),t.textContent="Puzzle solved!",n=E(),s=M("p"),i=S("Your time: "),l=S(o),y(s,"class","modal-text svelte-4jjkt5")},m(r,u){k(r,t,u),k(r,n,u),k(r,s,u),v(s,i),v(s,l)},p(r,u){u&64&&o!==(o=te(new Date-r[6])+"")&&U(l,o)},d(r){r&&w(t),r&&w(n),r&&w(s)}}}function An(e){let t,n,s,i,o,l,r,u=!e[1]&&ne(e),a=e[0]&&se(e),h=!e[1]&&ie(e),d=e[1]&&oe(e),c=e[7]&&le(e);return{c(){t=M("main"),u&&u.c(),n=E(),a&&a.c(),s=E(),h&&h.c(),i=E(),d&&d.c(),o=E(),c&&c.c(),l=He(),y(t,"class","container")},m(f,m){k(f,t,m),u&&u.m(t,null),v(t,n),a&&a.m(t,null),v(t,s),h&&h.m(t,null),k(f,i,m),d&&d.m(f,m),k(f,o,m),c&&c.m(f,m),k(f,l,m),r=!0},p(f,[m]){f[1]?u&&(u.d(1),u=null):u?u.p(f,m):(u=ne(f),u.c(),u.m(t,n)),f[0]?a?a.p(f,m):(a=se(f),a.c(),a.m(t,s)):a&&(a.d(1),a=null),f[1]?h&&(h.d(1),h=null):h?h.p(f,m):(h=ie(f),h.c(),h.m(t,null)),f[1]?d?(d.p(f,m),m&2&&R(d,1)):(d=oe(f),d.c(),R(d,1),d.m(o.parentNode,o)):d&&(Et(),A(d,1,1,()=>{d=null}),St()),f[7]?c?(c.p(f,m),m&128&&R(c,1)):(c=le(f),c.c(),R(c,1),c.m(l.parentNode,l)):c&&(Et(),A(c,1,1,()=>{c=null}),St())},i(f){r||(R(d),R(c),r=!0)},o(f){A(d),A(c),r=!1},d(f){f&&w(t),u&&u.d(),a&&a.d(),h&&h.d(),f&&w(i),d&&d.d(f),f&&w(o),c&&c.d(f),f&&w(l)}}}function Dn(e,t,n){let s,i;Yt(e,Vt,P=>n(6,s=P)),Yt(e,Rt,P=>n(7,i=P));let o,l=!1,r;const u=["Easy","Medium","Hard","debug"];let a=u[0];J.update(P=>5);let h;J.subscribe(P=>{n(4,h=P)}),at.update(P=>.4);let d;at.subscribe(P=>{d=P});function c(){n(1,l=!1),Gt(Rt,i=!1,i),n(0,o=""),n(2,r.style.display="block",r)}function f(){o&&(n(1,l=!0),n(2,r.style.display="none",r),Gt(Vt,s=new Date,s))}function m(){a==="Easy"?J.update(P=>5):a==="Medium"?J.update(P=>7):a==="Hard"?J.update(P=>10):a==="debug"&&J.update(P=>2)}function _(){d>0?at.update(P=>0):at.update(P=>.4)}let g;function p(P){G[P?"unshift":"push"](()=>{g=P,n(5,g)})}const $=P=>{let V=P.target.form[0].files[0];V&&n(0,o=URL.createObjectURL(V))},z=()=>{g.click()},F=()=>n(0,o="https://picsum.photos/500?random="+Math.floor(Math.random()*1e3));function Y(P){G[P?"unshift":"push"](()=>{r=P,n(2,r)})}function X(){a=We(this),n(3,a),n(8,u)}return[o,l,r,a,h,g,s,i,u,c,f,m,_,p,$,z,F,Y,X,()=>{l?c():f()},()=>{l?c():f()}]}class Fn extends it{constructor(t){super(),st(this,t,Dn,An,Q,{})}}new Fn({target:document.getElementById("app")});
